{"remainingRequest":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\components\\jeecg\\JAreaLinkage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\components\\jeecg\\JAreaLinkage.vue","mtime":1611914356000},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1621061377995},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1621061372054}],"contextDependencies":[],"result":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { pcaa } from 'area-data';\nimport Area from '@/components/_util/Area';\nexport default {\n  name: 'JAreaLinkage',\n  props: {\n    value: {\n      type: String,\n      required: false\n    },\n    // 组件的类型，可选值：\n    // select 下拉样式\n    // cascader 级联样式（默认）\n    type: {\n      type: String,\n      default: 'cascader'\n    },\n    width: {\n      type: String,\n      default: '100%'\n    }\n  },\n  data: function data() {\n    return {\n      pcaa: pcaa,\n      innerValue: [],\n      usedListeners: ['change'],\n      enums: {\n        type: ['cascader', 'select']\n      },\n      reloading: false,\n      areaData: ''\n    };\n  },\n  computed: {\n    _listeners: function _listeners() {\n      var listeners = _objectSpread({}, this.$listeners); // 去掉已使用的事件，防止冲突\n\n\n      this.usedListeners.forEach(function (key) {\n        delete listeners[key];\n      });\n      return listeners;\n    },\n    _type: function _type() {\n      if (this.enums.type.includes(this.type)) {\n        return this.type;\n      } else {\n        console.error(\"JAreaLinkage\\u7684type\\u5C5E\\u6027\\u53EA\\u80FD\\u63A5\\u6536\\u6307\\u5B9A\\u7684\\u503C\\uFF08\".concat(this.enums.type.join('|'), \"\\uFF09\"));\n        return this.enums.type[0];\n      }\n    }\n  },\n  watch: {\n    value: {\n      immediate: true,\n      handler: function handler() {\n        this.loadDataByValue(this.value);\n      }\n    }\n  },\n  created: function created() {\n    this.initAreaData();\n  },\n  methods: {\n    /** 重新加载组件 */\n    reload: function reload() {\n      var _this = this;\n\n      this.reloading = true;\n      this.$nextTick(function () {\n        return _this.reloading = false;\n      });\n    },\n\n    /** 通过 value 反推 options */\n    loadDataByValue: function loadDataByValue(value) {\n      if (!value || value.length === 0) {\n        this.innerValue = [];\n      } else {\n        this.initAreaData();\n        var arr = this.areaData.getRealCode(value);\n        this.innerValue = arr;\n      }\n\n      this.reload();\n    },\n\n    /** 通过地区code获取子级 */\n    loadDataByCode: function loadDataByCode(value) {\n      var options = [];\n      var data = pcaa[value];\n\n      if (data) {\n        for (var key in data) {\n          if (data.hasOwnProperty(key)) {\n            options.push({\n              value: key,\n              label: data[key]\n            });\n          }\n        }\n\n        return options;\n      } else {\n        return [];\n      }\n    },\n\n    /** 判断是否有子节点 */\n    hasChildren: function hasChildren(options) {\n      var _this2 = this;\n\n      options.forEach(function (option) {\n        var data = _this2.loadDataByCode(option.value);\n\n        option.isLeaf = data.length === 0;\n      });\n    },\n    handleChange: function handleChange(values) {\n      var value = values[values.length - 1];\n      this.$emit('change', value);\n    },\n    initAreaData: function initAreaData() {\n      if (!this.areaData) {\n        this.areaData = new Area();\n      }\n    }\n  },\n  model: {\n    prop: 'value',\n    event: 'change'\n  }\n};",{"version":3,"sources":["JAreaLinkage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"j-area-linkage\">\n    <div v-if=\"reloading\">\n      <span> Reloading... </span>\n    </div>\n    <area-cascader\n      v-else-if=\"_type === enums.type[0]\"\n      :value=\"innerValue\"\n      :data=\"pcaa\"\n      :level=\"1\"\n      :style=\"{width}\"\n      v-bind=\"$attrs\"\n      v-on=\"_listeners\"\n      @change=\"handleChange\"\n    />\n    <area-select\n      v-else-if=\"_type === enums.type[1]\"\n      :value=\"innerValue\"\n      :data=\"pcaa\"\n      :level=\"2\"\n      v-bind=\"$attrs\"\n      v-on=\"_listeners\"\n      @change=\"handleChange\"\n    />\n    <div v-else>\n      <span style=\"color:red;\"> Bad type value: {{_type}}</span>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { pcaa } from 'area-data'\n  import Area from '@/components/_util/Area'\n\n  export default {\n    name: 'JAreaLinkage',\n    props: {\n      value: {\n        type: String,\n        required:false\n      },\n      // 组件的类型，可选值：\n      // select 下拉样式\n      // cascader 级联样式（默认）\n      type: {\n        type: String,\n        default: 'cascader'\n      },\n      width: {\n        type: String,\n        default: '100%'\n      }\n    },\n    data() {\n      return {\n        pcaa,\n        innerValue: [],\n        usedListeners: ['change'],\n        enums: {\n          type: ['cascader', 'select']\n        },\n        reloading: false,\n        areaData:''\n      }\n    },\n    computed: {\n      _listeners() {\n        let listeners = { ...this.$listeners }\n        // 去掉已使用的事件，防止冲突\n        this.usedListeners.forEach(key => {\n          delete listeners[key]\n        })\n        return listeners\n      },\n      _type() {\n        if (this.enums.type.includes(this.type)) {\n          return this.type\n        } else {\n          console.error(`JAreaLinkage的type属性只能接收指定的值（${this.enums.type.join('|')}）`)\n          return this.enums.type[0]\n        }\n      },\n    },\n    watch: {\n      value: {\n        immediate: true,\n        handler() {\n          this.loadDataByValue(this.value)\n        }\n      },\n    },\n    created() {\n      this.initAreaData();\n    },\n    methods: {\n\n      /** 重新加载组件 */\n      reload() {\n        this.reloading = true\n        this.$nextTick(() => this.reloading = false)\n      },\n\n      /** 通过 value 反推 options */\n      loadDataByValue(value) {\n        if (!value || value.length === 0) {\n          this.innerValue = []\n        } else {\n          this.initAreaData()\n          let arr = this.areaData.getRealCode(value)\n          this.innerValue = arr\n        }\n        this.reload()\n      },\n      /** 通过地区code获取子级 */\n      loadDataByCode(value) {\n        let options = []\n        let data = pcaa[value]\n        if (data) {\n          for (let key in data) {\n            if (data.hasOwnProperty(key)) {\n              options.push({ value: key, label: data[key], })\n            }\n          }\n          return options\n        } else {\n          return []\n        }\n      },\n      /** 判断是否有子节点 */\n      hasChildren(options) {\n        options.forEach(option => {\n          let data = this.loadDataByCode(option.value)\n          option.isLeaf = data.length === 0\n        })\n      },\n      handleChange(values) {\n        let value = values[values.length - 1]\n        this.$emit('change', value)\n      },\n      initAreaData(){\n        if(!this.areaData){\n          this.areaData = new Area();\n        }\n      },\n\n    },\n    model: { prop: 'value', event: 'change' },\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  .j-area-linkage {\n    height:40px;\n    /deep/ .area-cascader-wrap .area-select {\n      width: 100%;\n    }\n\n    /deep/ .area-select .area-selected-trigger {\n      line-height: 1.15;\n    }\n  }\n\n</style>"],"sourceRoot":"src/components/jeecg"}]}