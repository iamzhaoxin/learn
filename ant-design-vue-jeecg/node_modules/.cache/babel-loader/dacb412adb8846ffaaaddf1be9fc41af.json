{"remainingRequest":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\activiti\\mixins\\activitiMixin.js","dependencies":[{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\activiti\\mixins\\activitiMixin.js","mtime":1621938823373},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1621061377995},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1617935819779}],"contextDependencies":[],"result":["import { filterObj } from '@/utils/util';\nimport { deleteAction, downFile, getAction } from '@/api/manage';\nimport Vue from 'vue';\nimport { ACCESS_TOKEN } from \"@/store/mutation-types\";\nimport JEllipsis from '@/components/jeecg/JEllipsis';\nexport var activitiMixin = {\n  components: {\n    JEllipsis: JEllipsis\n  },\n  data: function data() {\n    return {\n      //token header\n      tokenHeader: {\n        'X-Access-Token': Vue.ls.get(ACCESS_TOKEN)\n      }\n    };\n  },\n  computed: {\n    /*todo 所有的流程表单，组件化注册，在此维护*/\n    allFormComponent: function allFormComponent() {\n      return [{\n        text: '示例表单',\n        routeName: '@/views/activiti/form/demoForm',\n        component: function component() {\n          return import(\"@/views/activiti/form/demoForm\");\n        },\n        businessTable: 'test_demo'\n      }, {\n        text: '请假单',\n        routeName: '@/views/activiti/form/leaveForm',\n        component: function component() {\n          return import(\"@/views/activiti/form/leaveForm\");\n        },\n        businessTable: 'test_demo'\n      }];\n    },\n    historicDetail: function historicDetail() {\n      return function () {\n        return import(\"@/views/activiti/historicDetail\");\n      };\n    }\n  },\n  methods: {\n    getFormComponent: function getFormComponent(routeName) {\n      return _.find(this.allFormComponent, {\n        routeName: routeName\n      }) || {};\n    },\n    millsToTime: function millsToTime(mills) {\n      if (!mills) {\n        return \"\";\n      }\n\n      var s = mills / 1000;\n\n      if (s < 60) {\n        return s.toFixed(0) + \" 秒\";\n      }\n\n      var m = s / 60;\n\n      if (m < 60) {\n        return m.toFixed(0) + \" 分钟\";\n      }\n\n      var h = m / 60;\n\n      if (h < 24) {\n        return h.toFixed(0) + \" 小时\";\n      }\n\n      var d = h / 24;\n\n      if (d < 30) {\n        return d.toFixed(0) + \" 天\";\n      }\n\n      var month = d / 30;\n\n      if (month < 12) {\n        return month.toFixed(0) + \" 个月\";\n      }\n\n      var year = month / 12;\n      return year.toFixed(0) + \" 年\";\n    },\n    handleTableChange: function handleTableChange(pagination, filters, sorter) {\n      //分页、排序、筛选变化时触发\n      //TODO 筛选\n      if (Object.keys(sorter).length > 0) {\n        this.isorter.column = sorter.field;\n        this.isorter.order = \"ascend\" == sorter.order ? \"asc\" : \"desc\";\n      }\n\n      this.ipagination = pagination; // this.loadData();\n    },\n    //根据key 获取流程定义数据\n    getProcessDefByKey: function getProcessDefByKey(key) {\n      var procDef = null;\n      var newestProcessList = JSON.parse(window.sessionStorage.getItem(\"newestProcessList\"));\n      newestProcessList.forEach(function (item) {\n        if (item.processKey === key) {\n          procDef = item;\n        }\n      });\n      return procDef;\n    }\n  }\n};",{"version":3,"sources":["D:/activiti/project01/jeecg-boot-activiti-master/ant-design-vue-jeecg/src/views/activiti/mixins/activitiMixin.js"],"names":["filterObj","deleteAction","downFile","getAction","Vue","ACCESS_TOKEN","JEllipsis","activitiMixin","components","data","tokenHeader","ls","get","computed","allFormComponent","text","routeName","component","businessTable","historicDetail","methods","getFormComponent","_","find","millsToTime","mills","s","toFixed","m","h","d","month","year","handleTableChange","pagination","filters","sorter","Object","keys","length","isorter","column","field","order","ipagination","getProcessDefByKey","key","procDef","newestProcessList","JSON","parse","window","sessionStorage","getItem","forEach","item","processKey"],"mappings":"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","sourcesContent":["import {filterObj} from '@/utils/util';\r\nimport {deleteAction, downFile, getAction} from '@/api/manage'\r\nimport Vue from 'vue'\r\nimport {ACCESS_TOKEN} from \"@/store/mutation-types\"\r\nimport JEllipsis from '@/components/jeecg/JEllipsis'\r\n\r\nexport const activitiMixin = {\r\n  components: {\r\n    JEllipsis\r\n  },\r\n  data(){\r\n    return {\r\n      //token header\r\n      tokenHeader: {'X-Access-Token': Vue.ls.get(ACCESS_TOKEN)},\r\n    }\r\n  },\r\n  computed:{\r\n    /*todo 所有的流程表单，组件化注册，在此维护*/\r\n    allFormComponent:function(){\r\n      return [\r\n          {\r\n            text:'示例表单',\r\n            routeName:'@/views/activiti/form/demoForm',\r\n            component:() => import(`@/views/activiti/form/demoForm`),\r\n            businessTable:'test_demo'\r\n          },\r\n        {\r\n          text:'请假单',\r\n          routeName:'@/views/activiti/form/leaveForm',\r\n          component:() => import(`@/views/activiti/form/leaveForm`),\r\n          businessTable:'test_demo'\r\n        }\r\n      ]\r\n    },\r\n    historicDetail:function () {\r\n      return () => import(`@/views/activiti/historicDetail`)\r\n    }\r\n  },\r\n  methods:{\r\n    getFormComponent(routeName){\r\n      return _.find(this.allFormComponent,{routeName:routeName})||{};\r\n    },\r\n    millsToTime(mills) {\r\n      if (!mills) {\r\n        return \"\";\r\n      }\r\n      let s = mills / 1000;\r\n      if (s < 60) {\r\n        return s.toFixed(0) + \" 秒\"\r\n      }\r\n      let m = s / 60;\r\n      if (m < 60) {\r\n        return m.toFixed(0) + \" 分钟\"\r\n      }\r\n      let h = m / 60;\r\n      if (h < 24) {\r\n        return h.toFixed(0) + \" 小时\"\r\n      }\r\n      let d = h / 24;\r\n      if (d < 30) {\r\n        return d.toFixed(0) + \" 天\"\r\n      }\r\n      let month = d / 30\r\n      if (month < 12) {\r\n        return month.toFixed(0) + \" 个月\"\r\n      }\r\n      let year = month / 12\r\n      return year.toFixed(0) + \" 年\"\r\n\r\n    },\r\n    handleTableChange(pagination, filters, sorter) {\r\n      //分页、排序、筛选变化时触发\r\n      //TODO 筛选\r\n      if (Object.keys(sorter).length > 0) {\r\n        this.isorter.column = sorter.field;\r\n        this.isorter.order = \"ascend\" == sorter.order ? \"asc\" : \"desc\"\r\n      }\r\n      this.ipagination = pagination;\r\n      // this.loadData();\r\n    },\r\n    //根据key 获取流程定义数据\r\n    getProcessDefByKey(key){\r\n      let procDef = null;\r\n      let newestProcessList = JSON.parse(window.sessionStorage.getItem(\"newestProcessList\"));\r\n      newestProcessList.forEach(function(item) {\r\n        if(item.processKey === key){\r\n          procDef = item;\r\n        }\r\n      });\r\n      return procDef;\r\n    },\r\n  }\r\n\r\n}"]}]}