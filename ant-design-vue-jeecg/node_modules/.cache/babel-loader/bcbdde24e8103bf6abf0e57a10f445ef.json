{"remainingRequest":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\components\\layouts\\TabLayout.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\components\\layouts\\TabLayout.vue","mtime":1621925474204},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1621061377995},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1621061372054}],"contextDependencies":[],"result":["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport GlobalLayout from '@/components/page/GlobalLayout';\nimport Contextmenu from '@/components/menu/Contextmenu';\nimport { mixin, mixinDevice } from '@/utils/mixin.js';\nimport { triggerWindowResizeEvent } from '@/utils/util';\nvar indexKey = '/dashboard/analysis';\nimport Vue from 'vue';\nimport { CACHE_INCLUDED_ROUTES } from \"@/store/mutation-types\";\nexport default {\n  name: 'TabLayout',\n  components: {\n    GlobalLayout: GlobalLayout,\n    Contextmenu: Contextmenu\n  },\n  mixins: [mixin, mixinDevice],\n  data: function data() {\n    return {\n      pageList: [],\n      linkList: [],\n      activePage: '',\n      menuVisible: false,\n      menuItemList: [{\n        key: '4',\n        icon: 'reload',\n        text: '刷 新'\n      }, {\n        key: '1',\n        icon: 'arrow-left',\n        text: '关闭左侧'\n      }, {\n        key: '2',\n        icon: 'arrow-right',\n        text: '关闭右侧'\n      }, {\n        key: '3',\n        icon: 'close',\n        text: '关闭其它'\n      }],\n      reloadFlag: true\n    };\n  },\n\n  /* update_begin author:wuxianquan date:20190828 for: 关闭当前tab页，供子页面调用 ->望菜单能配置外链，直接弹出新页面而不是嵌入iframe #428 */\n  provide: function provide() {\n    return {\n      closeCurrent: this.closeCurrent\n    };\n  },\n\n  /* update_end author:wuxianquan date:20190828 for: 关闭当前tab页，供子页面调用->望菜单能配置外链，直接弹出新页面而不是嵌入iframe #428 */\n  computed: {\n    multipage: function multipage() {\n      //判断如果是手机模式，自动切换为单页面模式\n      if (this.isMobile()) {\n        return false;\n      } else {\n        return this.$store.state.app.multipage;\n      }\n    }\n  },\n  created: function created() {\n    if (this.$route.path != indexKey) {\n      this.addIndexToFirst();\n    } // 复制一个route对象出来，不能影响原route\n\n\n    var currentRoute = Object.assign({}, this.$route);\n    currentRoute.meta = Object.assign({}, currentRoute.meta); // update-begin-author:sunjianlei date:20191223 for: 修复刷新后菜单Tab名字显示异常\n\n    var storeKey = 'route:title:' + currentRoute.fullPath;\n    var routeTitle = this.$ls.get(storeKey);\n\n    if (routeTitle) {\n      currentRoute.meta.title = routeTitle;\n    } // update-end-author:sunjianlei date:20191223 for: 修复刷新后菜单Tab名字显示异常\n\n\n    this.pageList.push(currentRoute);\n    this.linkList.push(currentRoute.fullPath);\n    this.activePage = currentRoute.fullPath;\n  },\n  mounted: function mounted() {},\n  watch: {\n    '$route': function $route(newRoute) {\n      //console.log(\"新的路由\",newRoute)\n      this.activePage = newRoute.fullPath;\n\n      if (!this.multipage) {\n        this.linkList = [newRoute.fullPath];\n        this.pageList = [Object.assign({}, newRoute)]; // update-begin-author:taoyan date:20200211 for: TASK #3368 【路由缓存】首页的缓存设置有问题，需要根据后台的路由配置来实现是否缓存\n      } else if (indexKey == newRoute.fullPath) {\n        //首页时 判断是否缓存 没有缓存 刷新之\n        if (newRoute.meta.keepAlive === false) {\n          this.routeReload();\n        } // update-end-author:taoyan date:20200211 for: TASK #3368 【路由缓存】首页的缓存设置有问题，需要根据后台的路由配置来实现是否缓存\n\n      } else if (this.linkList.indexOf(newRoute.fullPath) < 0) {\n        this.linkList.push(newRoute.fullPath);\n        this.pageList.push(Object.assign({}, newRoute)); //// update-begin-author:sunjianlei date:20200103 for: 如果新增的页面配置了缓存路由，那么就强制刷新一遍 #842\n        // if (newRoute.meta.keepAlive) {\n        //   this.routeReload()\n        // }\n        //// update-end-author:sunjianlei date:20200103 for: 如果新增的页面配置了缓存路由，那么就强制刷新一遍 #842\n      } else if (this.linkList.indexOf(newRoute.fullPath) >= 0) {\n        var oldIndex = this.linkList.indexOf(newRoute.fullPath);\n        var oldPositionRoute = this.pageList[oldIndex];\n        this.pageList.splice(oldIndex, 1, Object.assign({}, newRoute, {\n          meta: oldPositionRoute.meta\n        }));\n      }\n    },\n    'activePage': function activePage(key) {\n      var index = this.linkList.lastIndexOf(key);\n      var waitRouter = this.pageList[index]; // 【TESTA-523】修复：不允许重复跳转路由异常\n\n      if (waitRouter.fullPath !== this.$route.fullPath) {\n        this.$router.push(Object.assign({}, waitRouter));\n      }\n\n      this.changeTitle(waitRouter.meta.title);\n    },\n    'multipage': function multipage(newVal) {\n      if (this.reloadFlag) {\n        if (!newVal) {\n          this.linkList = [this.$route.fullPath];\n          this.pageList = [this.$route];\n        }\n      }\n    },\n    // update-begin-author:sunjianlei date:20191223 for: 修复从单页模式切换回多页模式后首页不居第一位的 BUG\n    device: function device() {\n      if (this.multipage && this.linkList.indexOf(indexKey) === -1) {\n        this.addIndexToFirst();\n      }\n    } // update-end-author:sunjianlei date:20191223 for: 修复从单页模式切换回多页模式后首页不居第一位的 BUG\n\n  },\n  methods: {\n    // update-begin-author:sunjianlei date:20191223 for: 修复从单页模式切换回多页模式后首页不居第一位的 BUG\n    // 将首页添加到第一位\n    addIndexToFirst: function addIndexToFirst() {\n      this.pageList.splice(0, 0, {\n        name: 'dashboard-analysis',\n        path: indexKey,\n        fullPath: indexKey,\n        meta: {\n          icon: 'dashboard',\n          title: '首页'\n        }\n      });\n      this.linkList.splice(0, 0, indexKey);\n    },\n    // update-end-author:sunjianlei date:20191223 for: 修复从单页模式切换回多页模式后首页不居第一位的 BUG\n    // update-begin-author:sunjianlei date:20200120 for: 动态更改页面标题\n    changeTitle: function changeTitle(title) {\n      var projectTitle = \"FastRun快速开发平台\"; // 首页特殊处理\n\n      if (this.$route.path === indexKey) {\n        document.title = projectTitle;\n      } else {\n        document.title = title + ' · ' + projectTitle;\n      }\n    },\n    // update-end-author:sunjianlei date:20200120 for: 动态更改页面标题\n    changePage: function changePage(key) {\n      this.activePage = key;\n    },\n    tabCallBack: function tabCallBack() {\n      this.$nextTick(function () {\n        //update-begin-author:taoyan date: 20201211 for:【新版】online报错 JT-100\n        setTimeout(function () {\n          //省市区组件里面给window绑定了个resize事件 导致切换页面的时候触发了他的resize，但是切换页面，省市区组件还没被销毁前就触发了该事件，导致控制台报错，加个延迟\n          triggerWindowResizeEvent();\n        }, 20); //update-end-author:taoyan date: 20201211 for:【新版】online报错 JT-100\n      });\n    },\n    editPage: function editPage(key, action) {\n      this[action](key);\n    },\n    remove: function remove(key) {\n      if (key == indexKey) {\n        this.$message.warning('首页不能关闭!');\n        return;\n      }\n\n      if (this.pageList.length === 1) {\n        this.$message.warning('这是最后一页，不能再关闭了啦');\n        return;\n      }\n\n      console.log(\"this.pageList \", this.pageList);\n      var removeRoute = this.pageList.filter(function (item) {\n        return item.fullPath == key;\n      });\n      this.pageList = this.pageList.filter(function (item) {\n        return item.fullPath !== key;\n      });\n      var index = this.linkList.indexOf(key);\n      this.linkList = this.linkList.filter(function (item) {\n        return item !== key;\n      });\n      index = index >= this.linkList.length ? this.linkList.length - 1 : index;\n      this.activePage = this.linkList[index]; //update-begin--Author:scott  Date:20201015 for：路由缓存问题，关闭了tab页时再打开就不刷新 #842\n      //关闭页面则从缓存cache_included_routes中删除路由，下次点击菜单会重新加载页面\n\n      var cacheRouterArray = Vue.ls.get(CACHE_INCLUDED_ROUTES) || [];\n\n      if (removeRoute && removeRoute[0]) {\n        var componentName = removeRoute[0].meta.componentName;\n        console.log(\"key: \", key);\n        console.log(\"componentName: \", componentName);\n\n        if (cacheRouterArray.includes(componentName)) {\n          cacheRouterArray.splice(cacheRouterArray.findIndex(function (item) {\n            return item === componentName;\n          }), 1);\n          Vue.ls.set(CACHE_INCLUDED_ROUTES, cacheRouterArray);\n        }\n      } //update-end--Author:scott  Date:20201015 for：路由缓存问题，关闭了tab页时再打开就不刷新 #842\n\n    },\n    onContextmenu: function onContextmenu(e) {\n      var pagekey = this.getPageKey(e.target);\n\n      if (pagekey !== null) {\n        e.preventDefault();\n        this.menuVisible = true;\n      }\n    },\n    getPageKey: function getPageKey(target, depth) {\n      depth = depth || 0;\n\n      if (depth > 2) {\n        return null;\n      }\n\n      var pageKey = target.getAttribute('pagekey');\n      pageKey = pageKey || (target.previousElementSibling ? target.previousElementSibling.getAttribute('pagekey') : null);\n      return pageKey || (target.firstElementChild ? this.getPageKey(target.firstElementChild, ++depth) : null);\n    },\n    onMenuSelect: function onMenuSelect(key, target) {\n      var pageKey = this.getPageKey(target);\n\n      switch (key) {\n        case '1':\n          this.closeLeft(pageKey);\n          break;\n\n        case '2':\n          this.closeRight(pageKey);\n          break;\n\n        case '3':\n          this.closeOthers(pageKey);\n          break;\n\n        case '4':\n          this.routeReload();\n          break;\n\n        default:\n          break;\n      }\n    },\n\n    /* update_begin author:wuxianquan date:20190828 for: 关闭当前tab页，供子页面调用->望菜单能配置外链，直接弹出新页面而不是嵌入iframe #428 */\n    closeCurrent: function closeCurrent() {\n      this.remove(this.activePage);\n    },\n\n    /* update_end author:wuxianquan date:20190828 for: 关闭当前tab页，供子页面调用->望菜单能配置外链，直接弹出新页面而不是嵌入iframe #428 */\n    closeOthers: function closeOthers(pageKey) {\n      var index = this.linkList.indexOf(pageKey);\n\n      if (pageKey == indexKey || pageKey.indexOf('?ticke=') >= 0) {\n        this.linkList = this.linkList.slice(index, index + 1);\n        this.pageList = this.pageList.slice(index, index + 1);\n        this.activePage = this.linkList[0];\n      } else {\n        var indexContent = this.pageList.slice(0, 1)[0];\n        this.linkList = this.linkList.slice(index, index + 1);\n        this.pageList = this.pageList.slice(index, index + 1);\n        this.linkList.unshift(indexContent.fullPath);\n        this.pageList.unshift(indexContent);\n        this.activePage = this.linkList[1];\n      }\n    },\n    closeLeft: function closeLeft(pageKey) {\n      if (pageKey == indexKey) {\n        return;\n      }\n\n      var tempList = _toConsumableArray(this.pageList);\n\n      var indexContent = tempList.slice(0, 1)[0];\n      var index = this.linkList.indexOf(pageKey);\n      this.linkList = this.linkList.slice(index);\n      this.pageList = this.pageList.slice(index);\n      this.linkList.unshift(indexContent.fullPath);\n      this.pageList.unshift(indexContent);\n\n      if (this.linkList.indexOf(this.activePage) < 0) {\n        this.activePage = this.linkList[0];\n      }\n    },\n    closeRight: function closeRight(pageKey) {\n      var index = this.linkList.indexOf(pageKey);\n      this.linkList = this.linkList.slice(0, index + 1);\n      this.pageList = this.pageList.slice(0, index + 1);\n\n      if (this.linkList.indexOf(this.activePage < 0)) {\n        this.activePage = this.linkList[this.linkList.length - 1];\n      }\n    },\n    //update-begin-author:taoyan date:20190430 for:动态路由title显示配置的菜单title而不是其对应路由的title\n    dynamicRouterShow: function dynamicRouterShow(key, title) {\n      var keyIndex = this.linkList.indexOf(key);\n\n      if (keyIndex >= 0) {\n        var currRouter = this.pageList[keyIndex];\n        var meta = Object.assign({}, currRouter.meta, {\n          title: title\n        });\n        this.pageList.splice(keyIndex, 1, Object.assign({}, currRouter, {\n          meta: meta\n        }));\n\n        if (key === this.activePage) {\n          this.changeTitle(title);\n        }\n      }\n    },\n    //update-end-author:taoyan date:20190430 for:动态路由title显示配置的菜单title而不是其对应路由的title\n    //update-begin-author:taoyan date:20191008 for:路由刷新\n    routeReload: function routeReload() {\n      var _this = this;\n\n      this.reloadFlag = false;\n      var ToggleMultipage = \"ToggleMultipage\";\n      this.$store.dispatch(ToggleMultipage, false);\n      this.$nextTick(function () {\n        _this.$store.dispatch(ToggleMultipage, true);\n\n        _this.reloadFlag = true;\n      });\n    },\n    //update-end-author:taoyan date:20191008 for:路由刷新\n    //新增一个返回方法\n    excuteCallback: function excuteCallback(callback) {\n      callback();\n    }\n  }\n};",{"version":3,"sources":["TabLayout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,OAAA,YAAA,MAAA,gCAAA;AACA,OAAA,WAAA,MAAA,+BAAA;AACA,SAAA,KAAA,EAAA,WAAA,QAAA,kBAAA;AACA,SAAA,wBAAA,QAAA,cAAA;AACA,IAAA,QAAA,GAAA,qBAAA;AACA,OAAA,GAAA,MAAA,KAAA;AACA,SAAA,qBAAA,QAAA,wBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,YAAA,EAAA,YADA;AAEA,IAAA,WAAA,EAAA;AAFA,GAFA;AAMA,EAAA,MAAA,EAAA,CAAA,KAAA,EAAA,WAAA,CANA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA,EAHA;AAIA,MAAA,WAAA,EAAA,KAJA;AAKA,MAAA,YAAA,EAAA,CACA;AAAA,QAAA,GAAA,EAAA,GAAA;AAAA,QAAA,IAAA,EAAA,QAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,GAAA,EAAA,GAAA;AAAA,QAAA,IAAA,EAAA,YAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAFA,EAGA;AAAA,QAAA,GAAA,EAAA,GAAA;AAAA,QAAA,IAAA,EAAA,aAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAHA,EAIA;AAAA,QAAA,GAAA,EAAA,GAAA;AAAA,QAAA,IAAA,EAAA,OAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAJA,CALA;AAWA,MAAA,UAAA,EAAA;AAXA,KAAA;AAaA,GArBA;;AAsBA;AACA,EAAA,OAvBA,qBAuBA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,KAAA;AADA,KAAA;AAGA,GA3BA;;AA4BA;AACA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA;AACA,UAAA,KAAA,QAAA,EAAA,EAAA;AACA,eAAA,KAAA;AACA,OAFA,MAEA;AACA,eAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAAA,SAAA;AACA;AACA;AARA,GA7BA;AAuCA,EAAA,OAvCA,qBAuCA;AACA,QAAA,KAAA,MAAA,CAAA,IAAA,IAAA,QAAA,EAAA;AACA,WAAA,eAAA;AACA,KAHA,CAIA;;;AACA,QAAA,YAAA,GAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,KAAA,MAAA,CAAA;AACA,IAAA,YAAA,CAAA,IAAA,GAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,YAAA,CAAA,IAAA,CAAA,CANA,CAOA;;AACA,QAAA,QAAA,GAAA,iBAAA,YAAA,CAAA,QAAA;AACA,QAAA,UAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA;;AACA,QAAA,UAAA,EAAA;AACA,MAAA,YAAA,CAAA,IAAA,CAAA,KAAA,GAAA,UAAA;AACA,KAZA,CAaA;;;AACA,SAAA,QAAA,CAAA,IAAA,CAAA,YAAA;AACA,SAAA,QAAA,CAAA,IAAA,CAAA,YAAA,CAAA,QAAA;AACA,SAAA,UAAA,GAAA,YAAA,CAAA,QAAA;AACA,GAxDA;AAyDA,EAAA,OAzDA,qBAyDA,CACA,CA1DA;AA2DA,EAAA,KAAA,EAAA;AACA,cAAA,gBAAA,QAAA,EAAA;AACA;AACA,WAAA,UAAA,GAAA,QAAA,CAAA,QAAA;;AACA,UAAA,CAAA,KAAA,SAAA,EAAA;AACA,aAAA,QAAA,GAAA,CAAA,QAAA,CAAA,QAAA,CAAA;AACA,aAAA,QAAA,GAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,QAAA,CAAA,CAAA,CAFA,CAGA;AACA,OAJA,MAIA,IAAA,QAAA,IAAA,QAAA,CAAA,QAAA,EAAA;AACA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,SAAA,KAAA,KAAA,EAAA;AACA,eAAA,WAAA;AACA,SAJA,CAKA;;AACA,OANA,MAMA,IAAA,KAAA,QAAA,CAAA,OAAA,CAAA,QAAA,CAAA,QAAA,IAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,IAAA,CAAA,QAAA,CAAA,QAAA;AACA,aAAA,QAAA,CAAA,IAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,QAAA,CAAA,EAFA,CAGA;AACA;AACA;AACA;AACA;AACA,OARA,MAQA,IAAA,KAAA,QAAA,CAAA,OAAA,CAAA,QAAA,CAAA,QAAA,KAAA,CAAA,EAAA;AACA,YAAA,QAAA,GAAA,KAAA,QAAA,CAAA,OAAA,CAAA,QAAA,CAAA,QAAA,CAAA;AACA,YAAA,gBAAA,GAAA,KAAA,QAAA,CAAA,QAAA,CAAA;AACA,aAAA,QAAA,CAAA,MAAA,CAAA,QAAA,EAAA,CAAA,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,QAAA,EAAA;AAAA,UAAA,IAAA,EAAA,gBAAA,CAAA;AAAA,SAAA,CAAA;AACA;AACA,KA3BA;AA4BA,kBAAA,oBAAA,GAAA,EAAA;AACA,UAAA,KAAA,GAAA,KAAA,QAAA,CAAA,WAAA,CAAA,GAAA,CAAA;AACA,UAAA,UAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,CAFA,CAGA;;AACA,UAAA,UAAA,CAAA,QAAA,KAAA,KAAA,MAAA,CAAA,QAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,UAAA,CAAA;AACA;;AACA,WAAA,WAAA,CAAA,UAAA,CAAA,IAAA,CAAA,KAAA;AACA,KApCA;AAqCA,iBAAA,mBAAA,MAAA,EAAA;AACA,UAAA,KAAA,UAAA,EAAA;AACA,YAAA,CAAA,MAAA,EAAA;AACA,eAAA,QAAA,GAAA,CAAA,KAAA,MAAA,CAAA,QAAA,CAAA;AACA,eAAA,QAAA,GAAA,CAAA,KAAA,MAAA,CAAA;AACA;AACA;AACA,KA5CA;AA6CA;AACA,IAAA,MA9CA,oBA8CA;AACA,UAAA,KAAA,SAAA,IAAA,KAAA,QAAA,CAAA,OAAA,CAAA,QAAA,MAAA,CAAA,CAAA,EAAA;AACA,aAAA,eAAA;AACA;AACA,KAlDA,CAmDA;;AAnDA,GA3DA;AAgHA,EAAA,OAAA,EAAA;AACA;AACA;AACA,IAAA,eAHA,6BAGA;AACA,WAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA,EAAA;AACA,QAAA,IAAA,EAAA,oBADA;AAEA,QAAA,IAAA,EAAA,QAFA;AAGA,QAAA,QAAA,EAAA,QAHA;AAIA,QAAA,IAAA,EAAA;AACA,UAAA,IAAA,EAAA,WADA;AAEA,UAAA,KAAA,EAAA;AAFA;AAJA,OAAA;AASA,WAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA,EAAA,QAAA;AACA,KAdA;AAeA;AAEA;AACA,IAAA,WAlBA,uBAkBA,KAlBA,EAkBA;AACA,UAAA,YAAA,GAAA,eAAA,CADA,CAEA;;AACA,UAAA,KAAA,MAAA,CAAA,IAAA,KAAA,QAAA,EAAA;AACA,QAAA,QAAA,CAAA,KAAA,GAAA,YAAA;AACA,OAFA,MAEA;AACA,QAAA,QAAA,CAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA,YAAA;AACA;AACA,KA1BA;AA2BA;AAEA,IAAA,UA7BA,sBA6BA,GA7BA,EA6BA;AACA,WAAA,UAAA,GAAA,GAAA;AACA,KA/BA;AAgCA,IAAA,WAhCA,yBAgCA;AACA,WAAA,SAAA,CAAA,YAAA;AACA;AACA,QAAA,UAAA,CAAA,YAAA;AACA;AACA,UAAA,wBAAA;AACA,SAHA,EAGA,EAHA,CAAA,CAFA,CAMA;AACA,OAPA;AAQA,KAzCA;AA0CA,IAAA,QA1CA,oBA0CA,GA1CA,EA0CA,MA1CA,EA0CA;AACA,WAAA,MAAA,EAAA,GAAA;AACA,KA5CA;AA6CA,IAAA,MA7CA,kBA6CA,GA7CA,EA6CA;AACA,UAAA,GAAA,IAAA,QAAA,EAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,SAAA;AACA;AACA;;AACA,UAAA,KAAA,QAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,gBAAA;AACA;AACA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,KAAA,QAAA;AACA,UAAA,WAAA,GAAA,KAAA,QAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,QAAA,IAAA,GAAA;AAAA,OAAA,CAAA;AACA,WAAA,QAAA,GAAA,KAAA,QAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,QAAA,KAAA,GAAA;AAAA,OAAA,CAAA;AACA,UAAA,KAAA,GAAA,KAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AACA,WAAA,QAAA,GAAA,KAAA,QAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,KAAA,GAAA;AAAA,OAAA,CAAA;AACA,MAAA,KAAA,GAAA,KAAA,IAAA,KAAA,QAAA,CAAA,MAAA,GAAA,KAAA,QAAA,CAAA,MAAA,GAAA,CAAA,GAAA,KAAA;AACA,WAAA,UAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,CAfA,CAiBA;AACA;;AACA,UAAA,gBAAA,GAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,qBAAA,KAAA,EAAA;;AACA,UAAA,WAAA,IAAA,WAAA,CAAA,CAAA,CAAA,EAAA;AACA,YAAA,aAAA,GAAA,WAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,aAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,GAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,iBAAA,EAAA,aAAA;;AACA,YAAA,gBAAA,CAAA,QAAA,CAAA,aAAA,CAAA,EAAA;AACA,UAAA,gBAAA,CAAA,MAAA,CAAA,gBAAA,CAAA,SAAA,CAAA,UAAA,IAAA;AAAA,mBAAA,IAAA,KAAA,aAAA;AAAA,WAAA,CAAA,EAAA,CAAA;AACA,UAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,qBAAA,EAAA,gBAAA;AACA;AACA,OA5BA,CA6BA;;AAEA,KA5EA;AA6EA,IAAA,aA7EA,yBA6EA,CA7EA,EA6EA;AACA,UAAA,OAAA,GAAA,KAAA,UAAA,CAAA,CAAA,CAAA,MAAA,CAAA;;AACA,UAAA,OAAA,KAAA,IAAA,EAAA;AACA,QAAA,CAAA,CAAA,cAAA;AACA,aAAA,WAAA,GAAA,IAAA;AACA;AACA,KAnFA;AAoFA,IAAA,UApFA,sBAoFA,MApFA,EAoFA,KApFA,EAoFA;AACA,MAAA,KAAA,GAAA,KAAA,IAAA,CAAA;;AACA,UAAA,KAAA,GAAA,CAAA,EAAA;AACA,eAAA,IAAA;AACA;;AACA,UAAA,OAAA,GAAA,MAAA,CAAA,YAAA,CAAA,SAAA,CAAA;AACA,MAAA,OAAA,GAAA,OAAA,KAAA,MAAA,CAAA,sBAAA,GAAA,MAAA,CAAA,sBAAA,CAAA,YAAA,CAAA,SAAA,CAAA,GAAA,IAAA,CAAA;AACA,aAAA,OAAA,KAAA,MAAA,CAAA,iBAAA,GAAA,KAAA,UAAA,CAAA,MAAA,CAAA,iBAAA,EAAA,EAAA,KAAA,CAAA,GAAA,IAAA,CAAA;AACA,KA5FA;AA6FA,IAAA,YA7FA,wBA6FA,GA7FA,EA6FA,MA7FA,EA6FA;AACA,UAAA,OAAA,GAAA,KAAA,UAAA,CAAA,MAAA,CAAA;;AACA,cAAA,GAAA;AACA,aAAA,GAAA;AACA,eAAA,SAAA,CAAA,OAAA;AACA;;AACA,aAAA,GAAA;AACA,eAAA,UAAA,CAAA,OAAA;AACA;;AACA,aAAA,GAAA;AACA,eAAA,WAAA,CAAA,OAAA;AACA;;AACA,aAAA,GAAA;AACA,eAAA,WAAA;AACA;;AACA;AACA;AAdA;AAgBA,KA/GA;;AAgHA;AACA,IAAA,YAjHA,0BAiHA;AACA,WAAA,MAAA,CAAA,KAAA,UAAA;AACA,KAnHA;;AAoHA;AACA,IAAA,WArHA,uBAqHA,OArHA,EAqHA;AACA,UAAA,KAAA,GAAA,KAAA,QAAA,CAAA,OAAA,CAAA,OAAA,CAAA;;AACA,UAAA,OAAA,IAAA,QAAA,IAAA,OAAA,CAAA,OAAA,CAAA,SAAA,KAAA,CAAA,EAAA;AACA,aAAA,QAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,KAAA,EAAA,KAAA,GAAA,CAAA,CAAA;AACA,aAAA,QAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,KAAA,EAAA,KAAA,GAAA,CAAA,CAAA;AACA,aAAA,UAAA,GAAA,KAAA,QAAA,CAAA,CAAA,CAAA;AACA,OAJA,MAIA;AACA,YAAA,YAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,CAAA;AACA,aAAA,QAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,KAAA,EAAA,KAAA,GAAA,CAAA,CAAA;AACA,aAAA,QAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,KAAA,EAAA,KAAA,GAAA,CAAA,CAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,YAAA,CAAA,QAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,YAAA;AACA,aAAA,UAAA,GAAA,KAAA,QAAA,CAAA,CAAA,CAAA;AACA;AACA,KAnIA;AAoIA,IAAA,SApIA,qBAoIA,OApIA,EAoIA;AACA,UAAA,OAAA,IAAA,QAAA,EAAA;AACA;AACA;;AACA,UAAA,QAAA,sBAAA,KAAA,QAAA,CAAA;;AACA,UAAA,YAAA,GAAA,QAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,CAAA;AACA,UAAA,KAAA,GAAA,KAAA,QAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,WAAA,QAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,KAAA,CAAA;AACA,WAAA,QAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,KAAA,CAAA;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,YAAA,CAAA,QAAA;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,YAAA;;AACA,UAAA,KAAA,QAAA,CAAA,OAAA,CAAA,KAAA,UAAA,IAAA,CAAA,EAAA;AACA,aAAA,UAAA,GAAA,KAAA,QAAA,CAAA,CAAA,CAAA;AACA;AACA,KAlJA;AAmJA,IAAA,UAnJA,sBAmJA,OAnJA,EAmJA;AACA,UAAA,KAAA,GAAA,KAAA,QAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,WAAA,QAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,CAAA;AACA,WAAA,QAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,CAAA;;AACA,UAAA,KAAA,QAAA,CAAA,OAAA,CAAA,KAAA,UAAA,GAAA,CAAA,CAAA,EAAA;AACA,aAAA,UAAA,GAAA,KAAA,QAAA,CAAA,KAAA,QAAA,CAAA,MAAA,GAAA,CAAA,CAAA;AACA;AACA,KA1JA;AA2JA;AACA,IAAA,iBA5JA,6BA4JA,GA5JA,EA4JA,KA5JA,EA4JA;AACA,UAAA,QAAA,GAAA,KAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA;;AACA,UAAA,QAAA,IAAA,CAAA,EAAA;AACA,YAAA,UAAA,GAAA,KAAA,QAAA,CAAA,QAAA,CAAA;AACA,YAAA,IAAA,GAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,UAAA,CAAA,IAAA,EAAA;AAAA,UAAA,KAAA,EAAA;AAAA,SAAA,CAAA;AACA,aAAA,QAAA,CAAA,MAAA,CAAA,QAAA,EAAA,CAAA,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,UAAA,EAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA,CAAA;;AACA,YAAA,GAAA,KAAA,KAAA,UAAA,EAAA;AACA,eAAA,WAAA,CAAA,KAAA;AACA;AACA;AACA,KAtKA;AAuKA;AAEA;AACA,IAAA,WA1KA,yBA0KA;AAAA;;AACA,WAAA,UAAA,GAAA,KAAA;AACA,UAAA,eAAA,GAAA,iBAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,eAAA,EAAA,KAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,eAAA,EAAA,IAAA;;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,IAAA;AACA,OAHA;AAIA,KAlLA;AAmLA;AACA;AACA,IAAA,cArLA,0BAqLA,QArLA,EAqLA;AACA,MAAA,QAAA;AACA;AAvLA;AAhHA,CAAA","sourcesContent":["<template>\r\n  <global-layout @dynamicRouterShow=\"dynamicRouterShow\">\r\n    <!-- update-begin- author:sunjianlei --- date:20191009 --- for: 提升右键菜单的层级 -->\r\n    <contextmenu :itemList=\"menuItemList\" :visible.sync=\"menuVisible\" style=\"z-index: 9999;\" @select=\"onMenuSelect\"/>\r\n    <!-- update-end- author:sunjianlei --- date:20191009 --- for: 提升右键菜单的层级 -->\r\n    <a-tabs\r\n      @contextmenu.native=\"e => onContextmenu(e)\"\r\n      v-if=\"multipage\"\r\n      :active-key=\"activePage\"\r\n      class=\"tab-layout-tabs\"\r\n      style=\"height:52px\"\r\n      :hide-add=\"true\"\r\n      type=\"editable-card\"\r\n      @change=\"changePage\"\r\n      @tabClick=\"tabCallBack\"\r\n      @edit=\"editPage\">\r\n      <a-tab-pane :id=\"page.fullPath\" :key=\"page.fullPath\" v-for=\"page in pageList\" :closable=\"!(page.meta.title=='首页')\">\r\n        <span slot=\"tab\" :pagekey=\"page.fullPath\">{{ page.meta.title }}</span>\r\n      </a-tab-pane>\r\n    </a-tabs>\r\n    <div style=\"margin: 12px 12px 0;\">\r\n      <transition name=\"page-toggle\">\r\n        <keep-alive v-if=\"multipage\">\r\n          <router-view v-if=\"reloadFlag\"/>\r\n        </keep-alive>\r\n        <template v-else>\r\n          <router-view v-if=\"reloadFlag\"/>\r\n        </template>\r\n      </transition>\r\n    </div>\r\n  </global-layout>\r\n</template>\r\n\r\n<script>\r\n  import GlobalLayout from '@/components/page/GlobalLayout'\r\n  import Contextmenu from '@/components/menu/Contextmenu'\r\n  import { mixin, mixinDevice } from '@/utils/mixin.js'\r\n  import { triggerWindowResizeEvent } from '@/utils/util'\r\n  const indexKey = '/dashboard/analysis'\r\n  import Vue from 'vue'\r\n  import { CACHE_INCLUDED_ROUTES } from \"@/store/mutation-types\"\r\n\r\n  export default {\r\n    name: 'TabLayout',\r\n    components: {\r\n      GlobalLayout,\r\n      Contextmenu\r\n    },\r\n    mixins: [mixin, mixinDevice],\r\n    data() {\r\n      return {\r\n        pageList: [],\r\n        linkList: [],\r\n        activePage: '',\r\n        menuVisible: false,\r\n        menuItemList: [\r\n          { key: '4', icon: 'reload', text: '刷 新' },\r\n          { key: '1', icon: 'arrow-left', text: '关闭左侧' },\r\n          { key: '2', icon: 'arrow-right', text: '关闭右侧' },\r\n          { key: '3', icon: 'close', text: '关闭其它' }\r\n        ],\r\n        reloadFlag:true\r\n      }\r\n    },\r\n    /* update_begin author:wuxianquan date:20190828 for: 关闭当前tab页，供子页面调用 ->望菜单能配置外链，直接弹出新页面而不是嵌入iframe #428 */\r\n    provide(){\r\n      return{\r\n        closeCurrent:this.closeCurrent\r\n      }\r\n    },\r\n    /* update_end author:wuxianquan date:20190828 for: 关闭当前tab页，供子页面调用->望菜单能配置外链，直接弹出新页面而不是嵌入iframe #428 */\r\n    computed: {\r\n      multipage() {\r\n        //判断如果是手机模式，自动切换为单页面模式\r\n        if (this.isMobile()) {\r\n          return false\r\n        } else {\r\n          return this.$store.state.app.multipage\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      if (this.$route.path != indexKey) {\r\n        this.addIndexToFirst()\r\n      }\r\n      // 复制一个route对象出来，不能影响原route\r\n      let currentRoute = Object.assign({}, this.$route)\r\n      currentRoute.meta = Object.assign({}, currentRoute.meta)\r\n      // update-begin-author:sunjianlei date:20191223 for: 修复刷新后菜单Tab名字显示异常\r\n      let storeKey = 'route:title:' + currentRoute.fullPath\r\n      let routeTitle = this.$ls.get(storeKey)\r\n      if (routeTitle) {\r\n        currentRoute.meta.title = routeTitle\r\n      }\r\n      // update-end-author:sunjianlei date:20191223 for: 修复刷新后菜单Tab名字显示异常\r\n      this.pageList.push(currentRoute)\r\n      this.linkList.push(currentRoute.fullPath)\r\n      this.activePage = currentRoute.fullPath\r\n    },\r\n    mounted() {\r\n    },\r\n    watch: {\r\n      '$route': function(newRoute) {\r\n        //console.log(\"新的路由\",newRoute)\r\n        this.activePage = newRoute.fullPath\r\n        if (!this.multipage) {\r\n          this.linkList = [newRoute.fullPath]\r\n          this.pageList = [Object.assign({},newRoute)]\r\n        // update-begin-author:taoyan date:20200211 for: TASK #3368 【路由缓存】首页的缓存设置有问题，需要根据后台的路由配置来实现是否缓存\r\n        } else if(indexKey==newRoute.fullPath) {\r\n          //首页时 判断是否缓存 没有缓存 刷新之\r\n          if (newRoute.meta.keepAlive === false) {\r\n            this.routeReload()\r\n          }\r\n        // update-end-author:taoyan date:20200211 for: TASK #3368 【路由缓存】首页的缓存设置有问题，需要根据后台的路由配置来实现是否缓存\r\n        }else if (this.linkList.indexOf(newRoute.fullPath) < 0) {\r\n          this.linkList.push(newRoute.fullPath)\r\n          this.pageList.push(Object.assign({},newRoute))\r\n          //// update-begin-author:sunjianlei date:20200103 for: 如果新增的页面配置了缓存路由，那么就强制刷新一遍 #842\r\n          // if (newRoute.meta.keepAlive) {\r\n          //   this.routeReload()\r\n          // }\r\n          //// update-end-author:sunjianlei date:20200103 for: 如果新增的页面配置了缓存路由，那么就强制刷新一遍 #842\r\n        } else if (this.linkList.indexOf(newRoute.fullPath) >= 0) {\r\n          let oldIndex = this.linkList.indexOf(newRoute.fullPath)\r\n          let oldPositionRoute = this.pageList[oldIndex]\r\n          this.pageList.splice(oldIndex, 1, Object.assign({},newRoute,{meta:oldPositionRoute.meta}))\r\n        }\r\n      },\r\n      'activePage': function(key) {\r\n        let index = this.linkList.lastIndexOf(key)\r\n        let waitRouter = this.pageList[index]\r\n        // 【TESTA-523】修复：不允许重复跳转路由异常\r\n        if (waitRouter.fullPath !== this.$route.fullPath) {\r\n          this.$router.push(Object.assign({}, waitRouter))\r\n        }\r\n        this.changeTitle(waitRouter.meta.title)\r\n      },\r\n      'multipage': function(newVal) {\r\n        if(this.reloadFlag){\r\n          if (!newVal) {\r\n            this.linkList = [this.$route.fullPath]\r\n            this.pageList = [this.$route]\r\n          }\r\n        }\r\n      },\r\n      // update-begin-author:sunjianlei date:20191223 for: 修复从单页模式切换回多页模式后首页不居第一位的 BUG\r\n      device() {\r\n        if (this.multipage && this.linkList.indexOf(indexKey) === -1) {\r\n          this.addIndexToFirst()\r\n        }\r\n      },\r\n      // update-end-author:sunjianlei date:20191223 for: 修复从单页模式切换回多页模式后首页不居第一位的 BUG\r\n    },\r\n    methods: {\r\n      // update-begin-author:sunjianlei date:20191223 for: 修复从单页模式切换回多页模式后首页不居第一位的 BUG\r\n      // 将首页添加到第一位\r\n      addIndexToFirst() {\r\n        this.pageList.splice(0, 0, {\r\n          name: 'dashboard-analysis',\r\n          path: indexKey,\r\n          fullPath: indexKey,\r\n          meta: {\r\n            icon: 'dashboard',\r\n            title: '首页'\r\n          }\r\n        })\r\n        this.linkList.splice(0, 0, indexKey)\r\n      },\r\n      // update-end-author:sunjianlei date:20191223 for: 修复从单页模式切换回多页模式后首页不居第一位的 BUG\r\n\r\n      // update-begin-author:sunjianlei date:20200120 for: 动态更改页面标题\r\n      changeTitle(title) {\r\n        let projectTitle = \"FastRun快速开发平台\"\r\n        // 首页特殊处理\r\n        if (this.$route.path === indexKey) {\r\n          document.title = projectTitle\r\n        } else {\r\n          document.title = title + ' · ' + projectTitle\r\n        }\r\n      },\r\n      // update-end-author:sunjianlei date:20200120 for: 动态更改页面标题\r\n\r\n      changePage(key) {\r\n        this.activePage = key\r\n      },\r\n      tabCallBack() {\r\n        this.$nextTick(() => {\r\n          //update-begin-author:taoyan date: 20201211 for:【新版】online报错 JT-100\r\n         setTimeout(()=>{\r\n           //省市区组件里面给window绑定了个resize事件 导致切换页面的时候触发了他的resize，但是切换页面，省市区组件还没被销毁前就触发了该事件，导致控制台报错，加个延迟\r\n           triggerWindowResizeEvent()\r\n         },20)\r\n          //update-end-author:taoyan date: 20201211 for:【新版】online报错 JT-100\r\n        })\r\n      },\r\n      editPage(key, action) {\r\n        this[action](key)\r\n      },\r\n      remove(key) {\r\n        if (key == indexKey) {\r\n          this.$message.warning('首页不能关闭!')\r\n          return\r\n        }\r\n        if (this.pageList.length === 1) {\r\n          this.$message.warning('这是最后一页，不能再关闭了啦')\r\n          return\r\n        }\r\n        console.log(\"this.pageList \",this.pageList );\r\n        let removeRoute = this.pageList.filter(item => item.fullPath == key)\r\n        this.pageList = this.pageList.filter(item => item.fullPath !== key)\r\n        let index = this.linkList.indexOf(key)\r\n        this.linkList = this.linkList.filter(item => item !== key)\r\n        index = index >= this.linkList.length ? this.linkList.length - 1 : index\r\n        this.activePage = this.linkList[index]\r\n\r\n        //update-begin--Author:scott  Date:20201015 for：路由缓存问题，关闭了tab页时再打开就不刷新 #842\r\n        //关闭页面则从缓存cache_included_routes中删除路由，下次点击菜单会重新加载页面\r\n        let cacheRouterArray = Vue.ls.get(CACHE_INCLUDED_ROUTES) || []\r\n        if (removeRoute && removeRoute[0]) {\r\n          let componentName = removeRoute[0].meta.componentName\r\n          console.log(\"key: \", key);\r\n          console.log(\"componentName: \", componentName);\r\n          if(cacheRouterArray.includes(componentName)){\r\n            cacheRouterArray.splice(cacheRouterArray.findIndex(item => item === componentName), 1)\r\n            Vue.ls.set(CACHE_INCLUDED_ROUTES, cacheRouterArray)\r\n          }\r\n        }\r\n        //update-end--Author:scott  Date:20201015 for：路由缓存问题，关闭了tab页时再打开就不刷新 #842\r\n\r\n      },\r\n      onContextmenu(e) {\r\n        const pagekey = this.getPageKey(e.target)\r\n        if (pagekey !== null) {\r\n          e.preventDefault()\r\n          this.menuVisible = true\r\n        }\r\n      },\r\n      getPageKey(target, depth) {\r\n        depth = depth || 0\r\n        if (depth > 2) {\r\n          return null\r\n        }\r\n        let pageKey = target.getAttribute('pagekey')\r\n        pageKey = pageKey || (target.previousElementSibling ? target.previousElementSibling.getAttribute('pagekey') : null)\r\n        return pageKey || (target.firstElementChild ? this.getPageKey(target.firstElementChild, ++depth) : null)\r\n      },\r\n      onMenuSelect(key, target) {\r\n        let pageKey = this.getPageKey(target)\r\n        switch (key) {\r\n          case '1':\r\n            this.closeLeft(pageKey)\r\n            break\r\n          case '2':\r\n            this.closeRight(pageKey)\r\n            break\r\n          case '3':\r\n            this.closeOthers(pageKey)\r\n            break\r\n          case '4':\r\n            this.routeReload()\r\n            break\r\n          default:\r\n            break\r\n        }\r\n      },\r\n      /* update_begin author:wuxianquan date:20190828 for: 关闭当前tab页，供子页面调用->望菜单能配置外链，直接弹出新页面而不是嵌入iframe #428 */\r\n      closeCurrent(){\r\n        this.remove(this.activePage);\r\n      },\r\n      /* update_end author:wuxianquan date:20190828 for: 关闭当前tab页，供子页面调用->望菜单能配置外链，直接弹出新页面而不是嵌入iframe #428 */\r\n      closeOthers(pageKey) {\r\n        let index = this.linkList.indexOf(pageKey)\r\n        if (pageKey == indexKey || pageKey.indexOf('?ticke=')>=0) {\r\n          this.linkList = this.linkList.slice(index, index + 1)\r\n          this.pageList = this.pageList.slice(index, index + 1)\r\n          this.activePage = this.linkList[0]\r\n        } else {\r\n          let indexContent = this.pageList.slice(0, 1)[0]\r\n          this.linkList = this.linkList.slice(index, index + 1)\r\n          this.pageList = this.pageList.slice(index, index + 1)\r\n          this.linkList.unshift(indexContent.fullPath)\r\n          this.pageList.unshift(indexContent)\r\n          this.activePage = this.linkList[1]\r\n        }\r\n      },\r\n      closeLeft(pageKey) {\r\n        if (pageKey == indexKey) {\r\n          return\r\n        }\r\n        let tempList = [...this.pageList]\r\n        let indexContent = tempList.slice(0, 1)[0]\r\n        let index = this.linkList.indexOf(pageKey)\r\n        this.linkList = this.linkList.slice(index)\r\n        this.pageList = this.pageList.slice(index)\r\n        this.linkList.unshift(indexContent.fullPath)\r\n        this.pageList.unshift(indexContent)\r\n        if (this.linkList.indexOf(this.activePage) < 0) {\r\n          this.activePage = this.linkList[0]\r\n        }\r\n      },\r\n      closeRight(pageKey) {\r\n        let index = this.linkList.indexOf(pageKey)\r\n        this.linkList = this.linkList.slice(0, index + 1)\r\n        this.pageList = this.pageList.slice(0, index + 1)\r\n        if (this.linkList.indexOf(this.activePage < 0)) {\r\n          this.activePage = this.linkList[this.linkList.length - 1]\r\n        }\r\n      },\r\n      //update-begin-author:taoyan date:20190430 for:动态路由title显示配置的菜单title而不是其对应路由的title\r\n      dynamicRouterShow(key,title){\r\n        let keyIndex = this.linkList.indexOf(key)\r\n        if(keyIndex>=0){\r\n          let currRouter = this.pageList[keyIndex]\r\n          let meta = Object.assign({},currRouter.meta,{title:title})\r\n          this.pageList.splice(keyIndex, 1, Object.assign({},currRouter,{meta:meta}))\r\n          if (key === this.activePage) {\r\n            this.changeTitle(title)\r\n          }\r\n        }\r\n      },\r\n      //update-end-author:taoyan date:20190430 for:动态路由title显示配置的菜单title而不是其对应路由的title\r\n\r\n      //update-begin-author:taoyan date:20191008 for:路由刷新\r\n      routeReload(){\r\n        this.reloadFlag = false\r\n        let ToggleMultipage = \"ToggleMultipage\"\r\n        this.$store.dispatch(ToggleMultipage,false)\r\n        this.$nextTick(()=>{\r\n          this.$store.dispatch(ToggleMultipage,true)\r\n          this.reloadFlag = true\r\n        })\r\n      },\r\n      //update-end-author:taoyan date:20191008 for:路由刷新\r\n      //新增一个返回方法\r\n      excuteCallback(callback){\r\n        callback()\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\r\n  /*\r\n * The following styles are auto-applied to elements with\r\n * transition=\"page-transition\" when their visibility is toggled\r\n * by Vue.js.\r\n *\r\n * You can easily play with the page transition by editing\r\n * these styles.\r\n */\r\n\r\n  .page-transition-enter {\r\n    opacity: 0;\r\n  }\r\n\r\n  .page-transition-leave-active {\r\n    opacity: 0;\r\n  }\r\n\r\n  .page-transition-enter .page-transition-container,\r\n  .page-transition-leave-active .page-transition-container {\r\n    -webkit-transform: scale(1.1);\r\n    transform: scale(1.1);\r\n  }\r\n\r\n  /*美化弹出Tab样式*/\r\n  .ant-tabs-nav-container {\r\n    margin-top: 4px;\r\n  }\r\n\r\n  /* 修改 ant-tabs 样式 */\r\n  .tab-layout-tabs.ant-tabs {\r\n    border-bottom: 1px solid #ccc;\r\n    border-left: 1px solid #ccc;\r\n    background-color: white;\r\n    padding: 0 20px;\r\n\r\n    .ant-tabs-bar {\r\n      margin: 4px 0 0;\r\n      border: none;\r\n    }\r\n\r\n  }\r\n\r\n  .tab-layout-tabs.ant-tabs {\r\n\r\n    &.ant-tabs-card .ant-tabs-tab {\r\n\r\n      padding: 0 24px !important;\r\n      background-color: white !important;\r\n      margin-right: 10px !important;\r\n\r\n      .ant-tabs-close-x {\r\n        width: 12px !important;\r\n        height: 12px !important;\r\n        opacity: 0 !important;\r\n        cursor: pointer !important;\r\n        font-size: 12px !important;\r\n        margin: 0 !important;\r\n        position: absolute;\r\n        top: 36%;\r\n        right: 6px;\r\n      }\r\n\r\n      &:hover .ant-tabs-close-x {\r\n        opacity: 1 !important;\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  .tab-layout-tabs.ant-tabs.ant-tabs-card > .ant-tabs-bar {\r\n    .ant-tabs-tab {\r\n      border: none !important;\r\n      border-bottom: 1px solid transparent !important;\r\n    }\r\n    .ant-tabs-tab-active {\r\n      border-color: @primary-color!important;\r\n    }\r\n  }\r\n\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/layouts"}]}