{"remainingRequest":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\activiti\\processInsManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\activiti\\processInsManage.vue","mtime":1611914356000},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1621061377995},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1621061372054}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { activitiMixin } from \"./mixins/activitiMixin\";\nimport { JeecgListMixin } from \"../../mixins/JeecgListMixin\";\nexport default {\n  mixins: [activitiMixin, JeecgListMixin],\n  name: \"process-ins-manage\",\n  data: function data() {\n    return {\n      openSearch: true,\n      openTip: true,\n      loading: true,\n      // 表单加载状态\n      selectCount: 0,\n      // 多选计数\n      selectList: [],\n      // 多选数据\n      searchForm: {\n        // 搜索框对应data对象\n        name: \"\",\n        key: \"\",\n        pageNumber: 1,\n        // 当前页数\n        pageSize: 10 // 页面大小\n\n      },\n      modalType: 0,\n      // 添加或编辑标识\n      modalVisible: false,\n      // 添加或编辑显示\n      modalTitle: \"\",\n      // 添加或编辑标题\n      form: {\n        // 添加或编辑表单对象初始化数据\n        reason: \"\"\n      },\n      formValidate: {// 表单验证规则\n      },\n      submitLoading: false,\n      // 添加或编辑提交状态\n      data: [],\n      // 表单数据\n      total: 0,\n      // 表单数据总数\n      deleteId: \"\",\n      url: {\n        getRunningProcess: '/actProcessIns/getRunningProcess',\n        deleteProcessIns: '/actProcessIns/delInsByIds/',\n        updateInsStatus: '/actProcessIns/updateInsStatus/'\n      },\n      modalLsVisible: false,\n      procInstId: '',\n      lcModa: {\n        title: '',\n        disabled: false,\n        visible: false,\n        formComponent: null,\n        isNew: false\n      }\n    };\n  },\n  methods: {\n    loadData: function loadData() {},\n    init: function init() {\n      this.getDataList();\n    },\n    getDataList: function getDataList() {\n      var _this = this;\n\n      this.loading = true;\n      this.getAction(this.url.getRunningProcess, this.searchForm).then(function (res) {\n        _this.loading = false;\n\n        if (res.success) {\n          _this.data = res.result;\n        } else {\n          _this.$message.error(res.message);\n        }\n      });\n    },\n    handleSearch: function handleSearch() {\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      this.getDataList();\n    },\n    handleReset: function handleReset() {\n      this.searchForm = {};\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10; // 重新加载数据\n\n      this.getDataList();\n    },\n    handelCancel: function handelCancel() {\n      this.modalVisible = false;\n    },\n    handelSubmit: function handelSubmit() {\n      var _this2 = this;\n\n      this.submitLoading = true;\n      this.postFormAction(this.url.deleteProcessIns + this.deleteId, this.form).then(function (res) {\n        _this2.submitLoading = false;\n\n        if (res.success) {\n          _this2.$message.success(\"操作成功\");\n\n          _this2.modalVisible = false;\n\n          _this2.getDataList();\n        } else {\n          _this2.$message.error(res.message);\n        }\n      });\n    },\n    editStatus: function editStatus(status, v) {\n      var _this3 = this;\n\n      var operation = \"\";\n\n      if (status == 0) {\n        operation = \"暂停挂起\";\n      } else {\n        operation = \"激活运行\";\n      }\n\n      this.$confirm({\n        title: \"确认\" + operation,\n        content: \"\\u60A8\\u786E\\u8BA4\\u8981\".concat(operation, \"\\u6D41\\u7A0B\\u5B9E\\u4F8B\").concat(v.name, \"?\"),\n        loading: true,\n        onOk: function onOk() {\n          var params = {\n            status: status,\n            id: v.id\n          };\n\n          _this3.postFormAction(_this3.url.updateInsStatus, params).then(function (res) {\n            if (res.success) {\n              _this3.$message.success(\"操作成功\");\n\n              _this3.getDataList();\n            } else {\n              _this3.$message.error(res.message);\n            }\n          });\n        }\n      });\n    },\n    detail: function detail(r) {\n      if (!r.routeName) {\n        this.$message.warning(\"该流程信息未配置表单，请联系开发人员！\");\n        return;\n      }\n\n      this.lcModa.disabled = true;\n      this.lcModa.title = '查看流程业务信息：' + r.name;\n      this.lcModa.formComponent = this.getFormComponent(r.routeName).component;\n      this.lcModa.processData = r;\n      this.lcModa.isNew = false;\n      this.lcModa.visible = true;\n    },\n    history: function history(v) {\n      if (!v.procInstId) {\n        this.$message.error(\"流程实例ID不存在\");\n        return;\n      }\n\n      this.procInstId = v.procInstId;\n      this.modalLsVisible = true;\n    },\n    remove: function remove(v) {\n      this.modalTitle = \"\\u786E\\u8BA4\\u5220\\u9664\\u6D41\\u7A0B \".concat(v.name); // 单个删除\n\n      this.deleteId = v.id;\n      this.modalType = 0;\n      this.modalVisible = true;\n    },\n    handleTableChange: function handleTableChange(pagination, filters, sorter) {\n      //分页、排序、筛选变化时触发\n      //TODO 筛选\n      if (Object.keys(sorter).length > 0) {\n        this.isorter.column = sorter.field;\n        this.isorter.order = \"ascend\" == sorter.order ? \"asc\" : \"desc\";\n      }\n\n      this.ipagination = pagination; // this.loadData();\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  },\n  watch: {}\n};",{"version":3,"sources":["processInsManage.vue"],"names":[],"mappings":"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","sourcesContent":["<style lang=\"less\">\n  @import '~@assets/less/common.less';\n</style>\n<template>\n  <div class=\"search\">\n    <a-card>\n      <div class=\"table-page-search-wrapper\">\n        <a-form layout=\"inline\" @keyup.enter.native=\"handleSearch\">\n          <a-row :gutter=\"24\">\n            <a-col :md=\"6\" :sm=\"8\">\n              <a-form-item label=\"流程名称\" prop=\"name\">\n                <a-input\n                  type=\"text\"\n                  v-model=\"searchForm.name\"\n                  placeholder=\"请输入\"\n                  clearable\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"6\" :sm=\"8\">\n              <a-form-item label=\"标识Key\" prop=\"name\">\n                <a-input\n                  type=\"text\"\n                  v-model=\"searchForm.key\"\n                  placeholder=\"请输入\"\n                  clearable\n                />\n              </a-form-item>\n            </a-col>\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\n            <a-col :md=\"6\" :sm=\"12\" >\n              <a-button @click=\"handleSearch\" type=\"primary\" icon=\"search\">搜索</a-button>\n              <a-button @click=\"handleReset\" style=\"margin-left: 10px;\">重置</a-button>\n            </a-col>\n          </span>\n          </a-row>\n        </a-form>\n      </div>\n      <a-row>\n        <a-table :scroll=\"scroll\" bordered\n          :loading=\"loading\"\n          rowKey=\"id\"\n          :dataSource=\"data\"\n          :pagination=\"ipagination\"\n          @change=\"handleTableChange\"\n          ref=\"table\"\n        >\n          <a-table-column title=\"#\"  :width=\"50\">\n            <template slot-scope=\"t,r,i\" >\n              <span> {{i+1}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"流程实例ID\" dataIndex=\"id\" :width=\"150\">\n            <template slot-scope=\"t,r,i\" >\n              <span> {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"流程名称\" dataIndex=\"name\" :width=\"150\">\n            <template slot-scope=\"t,r,i\" >\n              <span> {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"申请人\" dataIndex=\"applyer\" :width=\"100\">\n            <template slot-scope=\"t,r,i\" >\n              <span> {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"标识Key\" dataIndex=\"key\" :width=\"150\">\n            <template slot-scope=\"t,r,i\" >\n              <span> {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"版本\" dataIndex=\"version\" :width=\"150\">\n            <template slot-scope=\"t,r,i\" >\n              <span> v.{{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"当前环节\" dataIndex=\"currTaskName\" :width=\"150\">\n            <template slot-scope=\"t,r,i\" >\n              <span> {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"状态\" dataIndex=\"isSuspended\" :width=\"110\"\n                    key=\"isSuspended\" :sorter=\"(a,b)=>Boolean(a.isSuspended)?0:1 - Boolean(b.isSuspended)?0:1\"\n          >\n            <template slot-scope=\"t,r,i\" >\n              <span v-if=\"t\" style=\"color: red\"> 已挂起 </span>\n              <span v-else style=\"color: #2f54eb\"> 已激活 </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"操作\" dataIndex=\"action\"  >\n            <template slot-scope=\"t,r,i\" >\n              <template v-if=\"r.isSuspended\">\n                <a href=\"javascript:void(0);\" style=\"color: green;\" @click=\"editStatus(1,r)\" >激活</a>\n                <a-divider type=\"vertical\" />\n              </template>\n              <template v-else>\n                <a href=\"javascript:void(0);\" style=\"color: orange;\" @click=\"editStatus(0,r)\" >挂起</a>\n                <a-divider type=\"vertical\" />\n              </template>\n              <a href=\"javascript:void(0);\" style=\"color: blue;\" @click=\"history(r)\" >审批详情</a>\n              <a-divider type=\"vertical\" />\n              <a href=\"javascript:void(0);\" style=\"color: #999;\" @click=\"detail(r)\" >表单数据</a>\n              <a-divider type=\"vertical\" />\n              <a-popconfirm title=\"确定删除吗?\" @confirm=\"() => remove(r)\">\n                <a style=\"color: red;\">删除</a>\n              </a-popconfirm>\n            </template>\n          </a-table-column>\n        </a-table>\n      </a-row>\n    </a-card>\n\n    <a-modal\n      :title=\"modalTitle\"\n      v-model=\"modalVisible\"\n      :mask-closable=\"false\"\n      :width=\"500\"\n      :styles=\"{top: '30px'}\"\n    >\n      <a-form ref=\"form\" :model=\"form\" :label-width=\"70\" :rules=\"formValidate\">\n        <a-form-item label=\"删除原因\" prop=\"reason\">\n          <a-input type=\"textarea\" v-model=\"form.reason\" :rows=\"4\" />\n        </a-form-item>\n      </a-form>\n      <div slot=\"footer\">\n        <a-button type=\"text\" @click=\"handelCancel\">取消</a-button>\n        <a-button type=\"primary\" :loading=\"submitLoading\" @click=\"handelSubmit\">提交</a-button>\n      </div>\n    </a-modal>\n    <!---->\n    <a-modal title=\"审批历史\" v-model=\"modalLsVisible\" :mask-closable=\"false\" :width=\"'80%'\" :footer=\"null\">\n      <div v-if=\"modalLsVisible\">\n        <component :is=\"historicDetail\" :procInstId=\"procInstId\"></component>\n      </div>\n    </a-modal>\n    <!--流程表单-->\n    <a-modal :title=\"lcModa.title\" v-model=\"lcModa.visible\" :footer=\"null\" :maskClosable=\"false\" width=\"80%\">\n      <component :disabled=\"lcModa.disabled\" v-if=\"lcModa.visible\" :is=\"lcModa.formComponent\"\n                 :processData=\"lcModa.processData\" :isNew = \"lcModa.isNew\"\n                 @close=\"lcModa.visible=false,lcModa.disabled = false\"></component>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport {activitiMixin} from \"./mixins/activitiMixin\";\nimport {JeecgListMixin} from \"../../mixins/JeecgListMixin\";\nexport default {\n  mixins:[activitiMixin,JeecgListMixin],\n  name: \"process-ins-manage\",\n  data() {\n    return {\n      openSearch: true,\n      openTip: true,\n      loading: true, // 表单加载状态\n      selectCount: 0, // 多选计数\n      selectList: [], // 多选数据\n      searchForm: {\n        // 搜索框对应data对象\n        name: \"\",\n        key: \"\",\n        pageNumber: 1, // 当前页数\n        pageSize: 10 // 页面大小\n      },\n      modalType: 0, // 添加或编辑标识\n      modalVisible: false, // 添加或编辑显示\n      modalTitle: \"\", // 添加或编辑标题\n      form: {\n        // 添加或编辑表单对象初始化数据\n        reason: \"\"\n      },\n      formValidate: {\n        // 表单验证规则\n      },\n      submitLoading: false, // 添加或编辑提交状态\n      data: [], // 表单数据\n      total: 0, // 表单数据总数\n      deleteId: \"\",\n      url: {\n        getRunningProcess:'/actProcessIns/getRunningProcess',\n        deleteProcessIns:'/actProcessIns/delInsByIds/',\n        updateInsStatus:'/actProcessIns/updateInsStatus/',\n      },\n      modalLsVisible: false,\n      procInstId: '',\n      lcModa: {\n        title:'',\n        disabled:false,\n        visible:false,\n        formComponent : null,\n        isNew : false\n      },\n    };\n  },\n  methods: {\n    loadData(){},\n    init() {\n      this.getDataList();\n    },\n    getDataList() {\n      this.loading = true;\n      this.getAction(this.url.getRunningProcess,this.searchForm).then(res => {\n        this.loading = false;\n        if (res.success) {\n          this.data = res.result;\n        }else {\n          this.$message.error(res.message)\n        }\n      });\n    },\n    handleSearch() {\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      this.getDataList();\n    },\n    handleReset() {\n      this.searchForm= {};\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      // 重新加载数据\n      this.getDataList();\n    },\n    handelCancel() {\n      this.modalVisible = false;\n    },\n    handelSubmit() {\n      this.submitLoading = true;\n      this.postFormAction(this.url.deleteProcessIns+this.deleteId, this.form).then(res => {\n        this.submitLoading = false;\n        if (res.success) {\n          this.$message.success(\"操作成功\");\n          this.modalVisible = false;\n          this.getDataList();\n        }else {\n          this.$message.error(res.message);\n        }\n      });\n    },\n    editStatus(status, v) {\n      let operation = \"\";\n      if (status == 0) {\n        operation = \"暂停挂起\";\n      } else {\n        operation = \"激活运行\";\n      }\n      this.$confirm({\n        title: \"确认\" + operation,\n        content: `您确认要${operation}流程实例${v.name}?`,\n        loading: true,\n        onOk: () => {\n          let params = {\n            status: status,\n            id: v.id\n          };\n          this.postFormAction(this.url.updateInsStatus,params).then(res => {\n            if (res.success) {\n              this.$message.success(\"操作成功\");\n              this.getDataList();\n            }else {\n              this.$message.error(res.message);\n            }\n          });\n        }\n      });\n    },\n    detail(r) {\n      if (!r.routeName) {\n        this.$message.warning(\n          \"该流程信息未配置表单，请联系开发人员！\"\n        );\n        return;\n      }\n      this.lcModa.disabled = true;\n      this.lcModa.title = '查看流程业务信息：'+r.name;\n      this.lcModa.formComponent = this.getFormComponent(r.routeName).component;\n      this.lcModa.processData = r;\n      this.lcModa.isNew = false;\n      this.lcModa.visible = true;\n    },\n    history(v) {\n      if (!v.procInstId) {\n        this.$message.error(\"流程实例ID不存在\");\n        return;\n      }\n      this.procInstId = v.procInstId;\n      this.modalLsVisible = true;\n    },\n    remove(v) {\n      this.modalTitle = `确认删除流程 ${v.name}`;\n      // 单个删除\n      this.deleteId = v.id;\n      this.modalType = 0;\n      this.modalVisible = true;\n    },\n    handleTableChange(pagination, filters, sorter) {\n      //分页、排序、筛选变化时触发\n      //TODO 筛选\n      if (Object.keys(sorter).length > 0) {\n        this.isorter.column = sorter.field;\n        this.isorter.order = \"ascend\" == sorter.order ? \"asc\" : \"desc\"\n      }\n      this.ipagination = pagination;\n      // this.loadData();\n    }\n  },\n  mounted() {\n    this.init();\n  },\n  watch: {\n  }\n};\n</script>"],"sourceRoot":"src/views/activiti"}]}