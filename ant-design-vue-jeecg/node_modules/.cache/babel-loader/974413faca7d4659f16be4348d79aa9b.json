{"remainingRequest":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\components\\jeecg\\JVxeTable\\mixins\\JVxeCellMixins.js","dependencies":[{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\components\\jeecg\\JVxeTable\\mixins\\JVxeCellMixins.js","mtime":1611914356000},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1621061377995},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1617935819779}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"D:\\\\activiti\\\\project01\\\\jeecg-boot-activiti-master\\\\ant-design-vue-jeecg\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\n\nvar _interceptor;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport PropTypes from 'ant-design-vue/es/_util/vue-types';\nimport { filterDictText } from '@/components/dict/JDictSelectUtil';\nimport { getEnhancedMixins, JVXERenderType, replaceProps } from '@/components/jeecg/JVxeTable/utils/cellUtils'; // noinspection JSUnusedLocalSymbols\n\nexport default {\n  inject: {\n    getParentContainer: {\n      default: function _default() {\n        return function (node) {\n          return node.parentNode;\n        };\n      }\n    }\n  },\n  props: {\n    value: PropTypes.any,\n    row: PropTypes.object,\n    column: PropTypes.object,\n    // 组件参数\n    params: PropTypes.object,\n    // 渲染选项\n    renderOptions: PropTypes.object,\n    // 渲染类型\n    renderType: PropTypes.string.def('default')\n  },\n  data: function data() {\n    return {\n      innerValue: null\n    };\n  },\n  computed: {\n    caseId: function caseId() {\n      return this.renderOptions.caseId;\n    },\n    originColumn: function originColumn() {\n      return this.column.own;\n    },\n    $type: function $type() {\n      return this.originColumn.$type;\n    },\n    rows: function rows() {\n      return this.params.data;\n    },\n    rowIndex: function rowIndex() {\n      return this.params.rowIndex;\n    },\n    columnIndex: function columnIndex() {\n      return this.params.columnIndex;\n    },\n    cellProps: function cellProps() {\n      var col = this.originColumn,\n          renderOptions = this.renderOptions;\n      var props = {}; // 输入占位符\n\n      props['placeholder'] = replaceProps(col, col.placeholder); // 解析props\n\n      if (_typeof(col.props) === 'object') {\n        Object.keys(col.props).forEach(function (key) {\n          props[key] = replaceProps(col, col.props[key]);\n        });\n      } // 判断是否是禁用的列\n\n\n      props['disabled'] = typeof col['disabled'] === 'boolean' ? col['disabled'] : props['disabled']; // TODO 判断是否是禁用的行\n      // if (props['disabled'] !== true) {\n      //   props['disabled'] = ((this.disabledRowIds || []).indexOf(row.id) !== -1)\n      // }\n      // 判断是否禁用所有组件\n\n      if (renderOptions.disabled === true) {\n        props['disabled'] = true;\n      }\n\n      return props;\n    }\n  },\n  watch: {\n    $type: {\n      immediate: true,\n      handler: function handler($type) {\n        this.enhanced = getEnhancedMixins($type);\n        this.listeners = getListeners.call(this);\n      }\n    },\n    value: {\n      immediate: true,\n      handler: function handler(val) {\n        var value = val; // 验证值格式\n\n        var originValue = this.row[this.column.property];\n        var getValue = this.enhanced.getValue.call(this, originValue);\n\n        if (originValue !== getValue) {\n          // 值格式不正确，重新赋值\n          value = getValue;\n          vModel.call(this, value);\n        }\n\n        this.innerValue = this.enhanced.setValue.call(this, value); // 判断是否启用翻译\n\n        if (this.renderType === JVXERenderType.spaner && this.enhanced.translate.enabled) {\n          this.innerValue = this.enhanced.translate.handler.call(this, value);\n        }\n      }\n    }\n  },\n  created: function created() {},\n  methods: {\n    /** 通用处理change事件 */\n    handleChangeCommon: function handleChangeCommon(value) {\n      var handle = this.enhanced.getValue.call(this, value);\n      this.trigger('change', {\n        value: handle\n      }); // 触发valueChange事件\n\n      this.parentTrigger('valueChange', {\n        type: this.$type,\n        value: handle,\n        oldValue: this.value,\n        col: this.originColumn,\n        rowIndex: this.params.rowIndex,\n        columnIndex: this.params.columnIndex\n      });\n    },\n\n    /** 通用处理blur事件 */\n    handleBlurCommon: function handleBlurCommon(value) {\n      this.trigger('blur', {\n        value: value\n      });\n    },\n\n    /**\n     *  如果事件存在的话，就触发\n     * @param name 事件名\n     * @param event 事件参数\n     * @param args 其他附带参数\n     */\n    trigger: function trigger(name, event) {\n      var args = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n      var listener = this.listeners[name];\n\n      if (typeof listener === 'function') {\n        if (_typeof(event) === 'object') {\n          event = this.packageEvent(name, event);\n        }\n\n        listener.apply(void 0, [event].concat(_toConsumableArray(args)));\n      }\n    },\n    parentTrigger: function parentTrigger(name, event) {\n      var args = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n      args.unshift(this.packageEvent(name, event));\n      this.trigger('trigger', name, args);\n    },\n    packageEvent: function packageEvent(name) {\n      var event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      event.row = this.row;\n      event.column = this.column; //online增强参数兼容\n\n      event.column['key'] = this.column['property'];\n      event.cellTarget = this;\n\n      if (!event.type) {\n        event.type = name;\n      }\n\n      if (!event.cellType) {\n        event.cellType = this.$type;\n      } // 是否校验表单，默认为true\n\n\n      if (typeof event.validate !== 'boolean') {\n        event.validate = true;\n      }\n\n      return event;\n    }\n  },\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n\n  /**\n   * 【自定义增强】用于实现一些增强事件\n   * 【注】这里只是定义接口，具体功能需要到各个组件内实现（也有部分功能实现）\n   * 【注】该属性不是Vue官方属性，是JVxeTable组件自定义的\n   *      所以方法内的 this 指向并不是当前组件，而是方法自身，\n   *      也就是说并不能 this 打点调实例里的任何方法\n   */\n  enhanced: {\n    // 注册参数（详见：https://xuliangzhan_admin.gitee.io/vxe-table/#/table/renderer/edit）\n    installOptions: {\n      // 自动聚焦的 class 类名\n      autofocus: ''\n    },\n    // 事件拦截器（用于兼容）\n    interceptor: (_interceptor = {}, _defineProperty(_interceptor, 'event.clearActived', function eventClearActived(params, event, target) {\n      return true;\n    }), _defineProperty(_interceptor, 'event.clearActived.className', function eventClearActivedClassName(params, event, target) {\n      return true;\n    }), _interceptor),\n    // 【功能开关】\n    switches: {\n      // 是否使用 editRender 模式（仅当前组件，并非全局）\n      // 如果设为true，则表头上方会出现一个可编辑的图标\n      editRender: true,\n      // false = 组件触发后可视）；true = 组件一直可视\n      visible: false\n    },\n    // 【切面增强】切面事件处理，一般在某些方法执行后同步执行\n    aopEvents: {\n      // 单元格被激活编辑时会触发该事件\n      editActived: function editActived() {},\n      // 单元格编辑状态下被关闭时会触发该事件\n      editClosed: function editClosed() {}\n    },\n    // 【翻译增强】可以实现例如select组件保存的value，但是span模式下需要显示成text\n    translate: {\n      // 是否启用翻译\n      enabled: false,\n\n      /**\n       * 【翻译处理方法】如果handler留空，则使用默认的翻译方法\n       * (this指向当前组件)\n       *\n       * @param value 需要翻译的值\n       * @returns{*} 返回翻译后的数据\n       */\n      handler: function handler(value) {\n        // 默认翻译方法\n        return filterDictText(this.column.own.options, value);\n      }\n    },\n\n    /**\n     * 【获取值增强】组件抛出的值\n     * (this指向当前组件)\n     *\n     * @param value 保存到数据库里的值\n     * @returns{*} 返回处理后的值\n     */\n    getValue: function getValue(value) {\n      return value;\n    },\n\n    /**\n     * 【设置值增强】设置给组件的值\n     * (this指向当前组件)\n     *\n     * @param value 组件触发的值\n     * @returns{*} 返回处理后的值\n     */\n    setValue: function setValue(value) {\n      return value;\n    },\n\n    /**\n     * 【新增行增强】在用户点击新增时触发的事件，返回新行的默认值\n     *\n     * @param row 行数据\n     * @param column 列配置，.own 是用户配置的参数\n     * @param $table vxe 实例\n     * @param renderOptions 渲染选项\n     * @param params 可以在这里获取 $table\n     *\n     * @returns 返回新值\n     */\n    createValue: function createValue(_ref) {\n      var row = _ref.row,\n          column = _ref.column,\n          $table = _ref.$table,\n          renderOptions = _ref.renderOptions,\n          params = _ref.params;\n      return column.own.defaultValue;\n    }\n  }\n};\n\nfunction getListeners() {\n  var _this = this;\n\n  var listeners = Object.assign({}, this.renderOptions.listeners || {});\n\n  if (!listeners.change) {\n    listeners.change = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                vModel.call(_this, event.value);\n                _context.next = 3;\n                return _this.$nextTick();\n\n              case 3:\n                // 处理 change 事件相关逻辑（例如校验）\n                _this.params.$table.updateStatus(_this.params);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  }\n\n  return listeners;\n}\n\nexport function vModel(value, row, property) {\n  if (!row) {\n    row = this.row;\n  }\n\n  if (!property) {\n    property = this.column.property;\n  }\n\n  this.$set(row, property, value);\n}\n/** 模拟触发事件 */\n\nexport function dispatchEvent(_ref3, className, handler) {\n  var cell = _ref3.cell,\n      $event = _ref3.$event;\n  window.setTimeout(function () {\n    var element = cell.getElementsByClassName(className);\n\n    if (element && element.length > 0) {\n      if (typeof handler === 'function') {\n        handler(element[0]);\n      } else {\n        // 模拟触发点击事件\n        element[0].dispatchEvent($event);\n      }\n    }\n  }, 10);\n}",{"version":3,"sources":["D:/activiti/project01/jeecg-boot-activiti-master/ant-design-vue-jeecg/src/components/jeecg/JVxeTable/mixins/JVxeCellMixins.js"],"names":["PropTypes","filterDictText","getEnhancedMixins","JVXERenderType","replaceProps","inject","getParentContainer","default","node","parentNode","props","value","any","row","object","column","params","renderOptions","renderType","string","def","data","innerValue","computed","caseId","originColumn","own","$type","rows","rowIndex","columnIndex","cellProps","col","placeholder","Object","keys","forEach","key","disabled","watch","immediate","handler","enhanced","listeners","getListeners","call","val","originValue","property","getValue","vModel","setValue","spaner","translate","enabled","created","methods","handleChangeCommon","handle","trigger","parentTrigger","type","oldValue","handleBlurCommon","name","event","args","listener","packageEvent","unshift","cellTarget","cellType","validate","model","prop","installOptions","autofocus","interceptor","target","switches","editRender","visible","aopEvents","editActived","editClosed","options","createValue","$table","defaultValue","assign","change","$nextTick","updateStatus","$set","dispatchEvent","className","cell","$event","window","setTimeout","element","getElementsByClassName","length"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,SAAP,MAAsB,mCAAtB;AACA,SAASC,cAAT,QAA+B,mCAA/B;AACA,SAASC,iBAAT,EAA4BC,cAA5B,EAA4CC,YAA5C,QAAgE,8CAAhE,C,CAEA;;AACA,eAAe;AACbC,EAAAA,MAAM,EAAE;AACNC,IAAAA,kBAAkB,EAAE;AAACC,MAAAA,OAAO,EAAE;AAAA,eAAO,UAACC,IAAD;AAAA,iBAAUA,IAAI,CAACC,UAAf;AAAA,SAAP;AAAA;AAAV;AADd,GADK;AAIbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAEX,SAAS,CAACY,GADZ;AAELC,IAAAA,GAAG,EAAEb,SAAS,CAACc,MAFV;AAGLC,IAAAA,MAAM,EAAEf,SAAS,CAACc,MAHb;AAIL;AACAE,IAAAA,MAAM,EAAEhB,SAAS,CAACc,MALb;AAML;AACAG,IAAAA,aAAa,EAAEjB,SAAS,CAACc,MAPpB;AAQL;AACAI,IAAAA,UAAU,EAAElB,SAAS,CAACmB,MAAV,CAAiBC,GAAjB,CAAqB,SAArB;AATP,GAJM;AAebC,EAAAA,IAfa,kBAeN;AACL,WAAO;AACLC,MAAAA,UAAU,EAAE;AADP,KAAP;AAGD,GAnBY;AAoBbC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,MADQ,oBACC;AACP,aAAO,KAAKP,aAAL,CAAmBO,MAA1B;AACD,KAHO;AAIRC,IAAAA,YAJQ,0BAIO;AACb,aAAO,KAAKV,MAAL,CAAYW,GAAnB;AACD,KANO;AAORC,IAAAA,KAPQ,mBAOA;AACN,aAAO,KAAKF,YAAL,CAAkBE,KAAzB;AACD,KATO;AAURC,IAAAA,IAVQ,kBAUD;AACL,aAAO,KAAKZ,MAAL,CAAYK,IAAnB;AACD,KAZO;AAaRQ,IAAAA,QAbQ,sBAaG;AACT,aAAO,KAAKb,MAAL,CAAYa,QAAnB;AACD,KAfO;AAgBRC,IAAAA,WAhBQ,yBAgBM;AACZ,aAAO,KAAKd,MAAL,CAAYc,WAAnB;AACD,KAlBO;AAmBRC,IAAAA,SAnBQ,uBAmBI;AAAA,UACSC,GADT,GAC+B,IAD/B,CACLP,YADK;AAAA,UACcR,aADd,GAC+B,IAD/B,CACcA,aADd;AAGV,UAAIP,KAAK,GAAG,EAAZ,CAHU,CAKV;;AACAA,MAAAA,KAAK,CAAC,aAAD,CAAL,GAAuBN,YAAY,CAAC4B,GAAD,EAAMA,GAAG,CAACC,WAAV,CAAnC,CANU,CAQV;;AACA,UAAI,QAAOD,GAAG,CAACtB,KAAX,MAAqB,QAAzB,EAAmC;AACjCwB,QAAAA,MAAM,CAACC,IAAP,CAAYH,GAAG,CAACtB,KAAhB,EAAuB0B,OAAvB,CAA+B,UAAAC,GAAG,EAAI;AACpC3B,UAAAA,KAAK,CAAC2B,GAAD,CAAL,GAAajC,YAAY,CAAC4B,GAAD,EAAMA,GAAG,CAACtB,KAAJ,CAAU2B,GAAV,CAAN,CAAzB;AACD,SAFD;AAGD,OAbS,CAeV;;;AACA3B,MAAAA,KAAK,CAAC,UAAD,CAAL,GAAqB,OAAOsB,GAAG,CAAC,UAAD,CAAV,KAA2B,SAA3B,GAAuCA,GAAG,CAAC,UAAD,CAA1C,GAAyDtB,KAAK,CAAC,UAAD,CAAnF,CAhBU,CAkBV;AACA;AACA;AACA;AAEA;;AACA,UAAIO,aAAa,CAACqB,QAAd,KAA2B,IAA/B,EAAqC;AACnC5B,QAAAA,KAAK,CAAC,UAAD,CAAL,GAAoB,IAApB;AACD;;AAED,aAAOA,KAAP;AACD;AAhDO,GApBG;AAsEb6B,EAAAA,KAAK,EAAE;AACLZ,IAAAA,KAAK,EAAE;AACLa,MAAAA,SAAS,EAAE,IADN;AAELC,MAAAA,OAFK,mBAEGd,KAFH,EAEU;AACb,aAAKe,QAAL,GAAgBxC,iBAAiB,CAACyB,KAAD,CAAjC;AACA,aAAKgB,SAAL,GAAiBC,YAAY,CAACC,IAAb,CAAkB,IAAlB,CAAjB;AACD;AALI,KADF;AAQLlC,IAAAA,KAAK,EAAE;AACL6B,MAAAA,SAAS,EAAE,IADN;AAELC,MAAAA,OAFK,mBAEGK,GAFH,EAEQ;AACX,YAAInC,KAAK,GAAGmC,GAAZ,CADW,CAGX;;AACA,YAAIC,WAAW,GAAG,KAAKlC,GAAL,CAAS,KAAKE,MAAL,CAAYiC,QAArB,CAAlB;AACA,YAAIC,QAAQ,GAAG,KAAKP,QAAL,CAAcO,QAAd,CAAuBJ,IAAvB,CAA4B,IAA5B,EAAkCE,WAAlC,CAAf;;AACA,YAAIA,WAAW,KAAKE,QAApB,EAA8B;AAC5B;AACAtC,UAAAA,KAAK,GAAGsC,QAAR;AACAC,UAAAA,MAAM,CAACL,IAAP,CAAY,IAAZ,EAAkBlC,KAAlB;AACD;;AAED,aAAKW,UAAL,GAAkB,KAAKoB,QAAL,CAAcS,QAAd,CAAuBN,IAAvB,CAA4B,IAA5B,EAAkClC,KAAlC,CAAlB,CAZW,CAcX;;AACA,YAAI,KAAKO,UAAL,KAAoBf,cAAc,CAACiD,MAAnC,IAA6C,KAAKV,QAAL,CAAcW,SAAd,CAAwBC,OAAzE,EAAkF;AAChF,eAAKhC,UAAL,GAAkB,KAAKoB,QAAL,CAAcW,SAAd,CAAwBZ,OAAxB,CAAgCI,IAAhC,CAAqC,IAArC,EAA2ClC,KAA3C,CAAlB;AACD;AACF;AApBI;AARF,GAtEM;AAqGb4C,EAAAA,OArGa,qBAqGH,CACT,CAtGY;AAuGbC,EAAAA,OAAO,EAAE;AAEP;AACAC,IAAAA,kBAHO,8BAGY9C,KAHZ,EAGmB;AACxB,UAAI+C,MAAM,GAAG,KAAKhB,QAAL,CAAcO,QAAd,CAAuBJ,IAAvB,CAA4B,IAA5B,EAAkClC,KAAlC,CAAb;AACA,WAAKgD,OAAL,CAAa,QAAb,EAAuB;AAAChD,QAAAA,KAAK,EAAE+C;AAAR,OAAvB,EAFwB,CAGxB;;AACA,WAAKE,aAAL,CAAmB,aAAnB,EAAkC;AAChCC,QAAAA,IAAI,EAAE,KAAKlC,KADqB;AAEhChB,QAAAA,KAAK,EAAE+C,MAFyB;AAGhCI,QAAAA,QAAQ,EAAE,KAAKnD,KAHiB;AAIhCqB,QAAAA,GAAG,EAAE,KAAKP,YAJsB;AAKhCI,QAAAA,QAAQ,EAAE,KAAKb,MAAL,CAAYa,QALU;AAMhCC,QAAAA,WAAW,EAAE,KAAKd,MAAL,CAAYc;AANO,OAAlC;AAQD,KAfM;;AAgBP;AACAiC,IAAAA,gBAjBO,4BAiBUpD,KAjBV,EAiBiB;AACtB,WAAKgD,OAAL,CAAa,MAAb,EAAqB;AAAChD,QAAAA,KAAK,EAALA;AAAD,OAArB;AACD,KAnBM;;AAqBP;;;;;;AAMAgD,IAAAA,OA3BO,mBA2BCK,IA3BD,EA2BOC,KA3BP,EA2ByB;AAAA,UAAXC,IAAW,uEAAJ,EAAI;AAC9B,UAAIC,QAAQ,GAAG,KAAKxB,SAAL,CAAeqB,IAAf,CAAf;;AACA,UAAI,OAAOG,QAAP,KAAoB,UAAxB,EAAoC;AAClC,YAAI,QAAOF,KAAP,MAAiB,QAArB,EAA+B;AAC7BA,UAAAA,KAAK,GAAG,KAAKG,YAAL,CAAkBJ,IAAlB,EAAwBC,KAAxB,CAAR;AACD;;AACDE,QAAAA,QAAQ,MAAR,UAASF,KAAT,4BAAmBC,IAAnB;AACD;AACF,KAnCM;AAoCPN,IAAAA,aApCO,yBAoCOI,IApCP,EAoCaC,KApCb,EAoC+B;AAAA,UAAXC,IAAW,uEAAJ,EAAI;AACpCA,MAAAA,IAAI,CAACG,OAAL,CAAa,KAAKD,YAAL,CAAkBJ,IAAlB,EAAwBC,KAAxB,CAAb;AACA,WAAKN,OAAL,CAAa,SAAb,EAAwBK,IAAxB,EAA8BE,IAA9B;AACD,KAvCM;AAwCPE,IAAAA,YAxCO,wBAwCMJ,IAxCN,EAwCwB;AAAA,UAAZC,KAAY,uEAAJ,EAAI;AAC7BA,MAAAA,KAAK,CAACpD,GAAN,GAAY,KAAKA,GAAjB;AACAoD,MAAAA,KAAK,CAAClD,MAAN,GAAe,KAAKA,MAApB,CAF6B,CAG7B;;AACAkD,MAAAA,KAAK,CAAClD,MAAN,CAAa,KAAb,IAAsB,KAAKA,MAAL,CAAY,UAAZ,CAAtB;AACAkD,MAAAA,KAAK,CAACK,UAAN,GAAmB,IAAnB;;AACA,UAAI,CAACL,KAAK,CAACJ,IAAX,EAAiB;AACfI,QAAAA,KAAK,CAACJ,IAAN,GAAaG,IAAb;AACD;;AACD,UAAI,CAACC,KAAK,CAACM,QAAX,EAAqB;AACnBN,QAAAA,KAAK,CAACM,QAAN,GAAiB,KAAK5C,KAAtB;AACD,OAX4B,CAY7B;;;AACA,UAAI,OAAOsC,KAAK,CAACO,QAAb,KAA0B,SAA9B,EAAyC;AACvCP,QAAAA,KAAK,CAACO,QAAN,GAAiB,IAAjB;AACD;;AACD,aAAOP,KAAP;AACD;AAzDM,GAvGI;AAmKbQ,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAE,OADD;AAELT,IAAAA,KAAK,EAAE;AAFF,GAnKM;;AAuKb;;;;;;;AAOAvB,EAAAA,QAAQ,EAAE;AACR;AACAiC,IAAAA,cAAc,EAAE;AACd;AACAC,MAAAA,SAAS,EAAE;AAFG,KAFR;AAMR;AACAC,IAAAA,WAAW,oDAGR,oBAHQ,6BAGc7D,MAHd,EAGsBiD,KAHtB,EAG6Ba,MAH7B,EAGqC;AAC5C,aAAO,IAAP;AACD,KALQ,iCAQR,8BARQ,sCAQwB9D,MARxB,EAQgCiD,KARhC,EAQuCa,MARvC,EAQ+C;AACtD,aAAO,IAAP;AACD,KAVQ,gBAPH;AAmBR;AACAC,IAAAA,QAAQ,EAAE;AACR;AACA;AACAC,MAAAA,UAAU,EAAE,IAHJ;AAIR;AACAC,MAAAA,OAAO,EAAE;AALD,KApBF;AA2BR;AACAC,IAAAA,SAAS,EAAE;AACT;AACAC,MAAAA,WAFS,yBAEK,CACb,CAHQ;AAIT;AACAC,MAAAA,UALS,wBAKI,CACZ;AANQ,KA5BH;AAoCR;AACA/B,IAAAA,SAAS,EAAE;AACT;AACAC,MAAAA,OAAO,EAAE,KAFA;;AAGT;;;;;;;AAOAb,MAAAA,OAVS,mBAUD9B,KAVC,EAUO;AACd;AACA,eAAOV,cAAc,CAAC,KAAKc,MAAL,CAAYW,GAAZ,CAAgB2D,OAAjB,EAA0B1E,KAA1B,CAArB;AACD;AAbQ,KArCH;;AAoDR;;;;;;;AAOAsC,IAAAA,QA3DQ,oBA2DCtC,KA3DD,EA2DQ;AACd,aAAOA,KAAP;AACD,KA7DO;;AA8DR;;;;;;;AAOAwC,IAAAA,QArEQ,oBAqECxC,KArED,EAqEQ;AACd,aAAOA,KAAP;AACD,KAvEO;;AAwER;;;;;;;;;;;AAWA2E,IAAAA,WAnFQ,6BAmFkD;AAAA,UAA7CzE,GAA6C,QAA7CA,GAA6C;AAAA,UAAxCE,MAAwC,QAAxCA,MAAwC;AAAA,UAAhCwE,MAAgC,QAAhCA,MAAgC;AAAA,UAAxBtE,aAAwB,QAAxBA,aAAwB;AAAA,UAATD,MAAS,QAATA,MAAS;AACxD,aAAOD,MAAM,CAACW,GAAP,CAAW8D,YAAlB;AACD;AArFO;AA9KG,CAAf;;AAuQA,SAAS5C,YAAT,GAAwB;AAAA;;AACtB,MAAID,SAAS,GAAGT,MAAM,CAACuD,MAAP,CAAc,EAAd,EAAmB,KAAKxE,aAAL,CAAmB0B,SAAnB,IAAgC,EAAnD,CAAhB;;AACA,MAAI,CAACA,SAAS,CAAC+C,MAAf,EAAuB;AACrB/C,IAAAA,SAAS,CAAC+C,MAAV;AAAA,2EAAmB,iBAAOzB,KAAP;AAAA;AAAA;AAAA;AAAA;AACjBf,gBAAAA,MAAM,CAACL,IAAP,CAAY,KAAZ,EAAkBoB,KAAK,CAACtD,KAAxB;AADiB;AAAA,uBAEX,KAAI,CAACgF,SAAL,EAFW;;AAAA;AAGjB;AACA,gBAAA,KAAI,CAAC3E,MAAL,CAAYuE,MAAZ,CAAmBK,YAAnB,CAAgC,KAAI,CAAC5E,MAArC;;AAJiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAnB;;AAAA;AAAA;AAAA;AAAA;AAMD;;AACD,SAAO2B,SAAP;AACD;;AAED,OAAO,SAASO,MAAT,CAAgBvC,KAAhB,EAAuBE,GAAvB,EAA4BmC,QAA5B,EAAsC;AAC3C,MAAI,CAACnC,GAAL,EAAU;AACRA,IAAAA,GAAG,GAAG,KAAKA,GAAX;AACD;;AACD,MAAI,CAACmC,QAAL,EAAe;AACbA,IAAAA,QAAQ,GAAG,KAAKjC,MAAL,CAAYiC,QAAvB;AACD;;AACD,OAAK6C,IAAL,CAAUhF,GAAV,EAAemC,QAAf,EAAyBrC,KAAzB;AACD;AAED;;AACA,OAAO,SAASmF,aAAT,QAAuCC,SAAvC,EAAkDtD,OAAlD,EAA2D;AAAA,MAAnCuD,IAAmC,SAAnCA,IAAmC;AAAA,MAA7BC,MAA6B,SAA7BA,MAA6B;AAChEC,EAAAA,MAAM,CAACC,UAAP,CAAkB,YAAM;AACtB,QAAIC,OAAO,GAAGJ,IAAI,CAACK,sBAAL,CAA4BN,SAA5B,CAAd;;AACA,QAAIK,OAAO,IAAIA,OAAO,CAACE,MAAR,GAAiB,CAAhC,EAAmC;AACjC,UAAI,OAAO7D,OAAP,KAAmB,UAAvB,EAAmC;AACjCA,QAAAA,OAAO,CAAC2D,OAAO,CAAC,CAAD,CAAR,CAAP;AACD,OAFD,MAEO;AACL;AACAA,QAAAA,OAAO,CAAC,CAAD,CAAP,CAAWN,aAAX,CAAyBG,MAAzB;AACD;AACF;AACF,GAVD,EAUG,EAVH;AAWD","sourcesContent":["import PropTypes from 'ant-design-vue/es/_util/vue-types'\nimport { filterDictText } from '@/components/dict/JDictSelectUtil'\nimport { getEnhancedMixins, JVXERenderType, replaceProps } from '@/components/jeecg/JVxeTable/utils/cellUtils'\n\n// noinspection JSUnusedLocalSymbols\nexport default {\n  inject: {\n    getParentContainer: {default: () => ((node) => node.parentNode)},\n  },\n  props: {\n    value: PropTypes.any,\n    row: PropTypes.object,\n    column: PropTypes.object,\n    // 组件参数\n    params: PropTypes.object,\n    // 渲染选项\n    renderOptions: PropTypes.object,\n    // 渲染类型\n    renderType: PropTypes.string.def('default'),\n  },\n  data() {\n    return {\n      innerValue: null,\n    }\n  },\n  computed: {\n    caseId() {\n      return this.renderOptions.caseId\n    },\n    originColumn() {\n      return this.column.own\n    },\n    $type() {\n      return this.originColumn.$type\n    },\n    rows() {\n      return this.params.data\n    },\n    rowIndex() {\n      return this.params.rowIndex\n    },\n    columnIndex() {\n      return this.params.columnIndex\n    },\n    cellProps() {\n      let {originColumn: col, renderOptions} = this\n\n      let props = {}\n\n      // 输入占位符\n      props['placeholder'] = replaceProps(col, col.placeholder)\n\n      // 解析props\n      if (typeof col.props === 'object') {\n        Object.keys(col.props).forEach(key => {\n          props[key] = replaceProps(col, col.props[key])\n        })\n      }\n\n      // 判断是否是禁用的列\n      props['disabled'] = (typeof col['disabled'] === 'boolean' ? col['disabled'] : props['disabled'])\n\n      // TODO 判断是否是禁用的行\n      // if (props['disabled'] !== true) {\n      //   props['disabled'] = ((this.disabledRowIds || []).indexOf(row.id) !== -1)\n      // }\n\n      // 判断是否禁用所有组件\n      if (renderOptions.disabled === true) {\n        props['disabled'] = true\n      }\n\n      return props\n    },\n  },\n  watch: {\n    $type: {\n      immediate: true,\n      handler($type) {\n        this.enhanced = getEnhancedMixins($type)\n        this.listeners = getListeners.call(this)\n      },\n    },\n    value: {\n      immediate: true,\n      handler(val) {\n        let value = val\n\n        // 验证值格式\n        let originValue = this.row[this.column.property]\n        let getValue = this.enhanced.getValue.call(this, originValue)\n        if (originValue !== getValue) {\n          // 值格式不正确，重新赋值\n          value = getValue\n          vModel.call(this, value)\n        }\n\n        this.innerValue = this.enhanced.setValue.call(this, value)\n\n        // 判断是否启用翻译\n        if (this.renderType === JVXERenderType.spaner && this.enhanced.translate.enabled) {\n          this.innerValue = this.enhanced.translate.handler.call(this, value)\n        }\n      },\n    },\n  },\n  created() {\n  },\n  methods: {\n\n    /** 通用处理change事件 */\n    handleChangeCommon(value) {\n      let handle = this.enhanced.getValue.call(this, value)\n      this.trigger('change', {value: handle})\n      // 触发valueChange事件\n      this.parentTrigger('valueChange', {\n        type: this.$type,\n        value: handle,\n        oldValue: this.value,\n        col: this.originColumn,\n        rowIndex: this.params.rowIndex,\n        columnIndex: this.params.columnIndex,\n      })\n    },\n    /** 通用处理blur事件 */\n    handleBlurCommon(value) {\n      this.trigger('blur', {value})\n    },\n\n    /**\n     *  如果事件存在的话，就触发\n     * @param name 事件名\n     * @param event 事件参数\n     * @param args 其他附带参数\n     */\n    trigger(name, event, args = []) {\n      let listener = this.listeners[name]\n      if (typeof listener === 'function') {\n        if (typeof event === 'object') {\n          event = this.packageEvent(name, event)\n        }\n        listener(event, ...args)\n      }\n    },\n    parentTrigger(name, event, args = []) {\n      args.unshift(this.packageEvent(name, event))\n      this.trigger('trigger', name, args)\n    },\n    packageEvent(name, event = {}) {\n      event.row = this.row\n      event.column = this.column\n      //online增强参数兼容\n      event.column['key'] = this.column['property']\n      event.cellTarget = this\n      if (!event.type) {\n        event.type = name\n      }\n      if (!event.cellType) {\n        event.cellType = this.$type\n      }\n      // 是否校验表单，默认为true\n      if (typeof event.validate !== 'boolean') {\n        event.validate = true\n      }\n      return event\n    },\n\n  },\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  /**\n   * 【自定义增强】用于实现一些增强事件\n   * 【注】这里只是定义接口，具体功能需要到各个组件内实现（也有部分功能实现）\n   * 【注】该属性不是Vue官方属性，是JVxeTable组件自定义的\n   *      所以方法内的 this 指向并不是当前组件，而是方法自身，\n   *      也就是说并不能 this 打点调实例里的任何方法\n   */\n  enhanced: {\n    // 注册参数（详见：https://xuliangzhan_admin.gitee.io/vxe-table/#/table/renderer/edit）\n    installOptions: {\n      // 自动聚焦的 class 类名\n      autofocus: '',\n    },\n    // 事件拦截器（用于兼容）\n    interceptor: {\n      // 已实现：event.clearActived\n      // 说明：比如点击了某个组件的弹出层面板之后，此时被激活单元格不应该被自动关闭，通过返回 false 可以阻止默认的行为。\n      ['event.clearActived'](params, event, target) {\n        return true\n      },\n      // 自定义：event.clearActived.className\n      // 说明：比原生的多了一个参数：className，用于判断点击的元素的样式名（递归到顶层）\n      ['event.clearActived.className'](params, event, target) {\n        return true\n      },\n    },\n    // 【功能开关】\n    switches: {\n      // 是否使用 editRender 模式（仅当前组件，并非全局）\n      // 如果设为true，则表头上方会出现一个可编辑的图标\n      editRender: true,\n      // false = 组件触发后可视）；true = 组件一直可视\n      visible: false,\n    },\n    // 【切面增强】切面事件处理，一般在某些方法执行后同步执行\n    aopEvents: {\n      // 单元格被激活编辑时会触发该事件\n      editActived() {\n      },\n      // 单元格编辑状态下被关闭时会触发该事件\n      editClosed() {\n      },\n    },\n    // 【翻译增强】可以实现例如select组件保存的value，但是span模式下需要显示成text\n    translate: {\n      // 是否启用翻译\n      enabled: false,\n      /**\n       * 【翻译处理方法】如果handler留空，则使用默认的翻译方法\n       * (this指向当前组件)\n       *\n       * @param value 需要翻译的值\n       * @returns{*} 返回翻译后的数据\n       */\n      handler(value,) {\n        // 默认翻译方法\n        return filterDictText(this.column.own.options, value)\n      },\n    },\n    /**\n     * 【获取值增强】组件抛出的值\n     * (this指向当前组件)\n     *\n     * @param value 保存到数据库里的值\n     * @returns{*} 返回处理后的值\n     */\n    getValue(value) {\n      return value\n    },\n    /**\n     * 【设置值增强】设置给组件的值\n     * (this指向当前组件)\n     *\n     * @param value 组件触发的值\n     * @returns{*} 返回处理后的值\n     */\n    setValue(value) {\n      return value\n    },\n    /**\n     * 【新增行增强】在用户点击新增时触发的事件，返回新行的默认值\n     *\n     * @param row 行数据\n     * @param column 列配置，.own 是用户配置的参数\n     * @param $table vxe 实例\n     * @param renderOptions 渲染选项\n     * @param params 可以在这里获取 $table\n     *\n     * @returns 返回新值\n     */\n    createValue({row, column, $table, renderOptions, params}) {\n      return column.own.defaultValue\n    },\n  }\n}\n\nfunction getListeners() {\n  let listeners = Object.assign({}, (this.renderOptions.listeners || {}))\n  if (!listeners.change) {\n    listeners.change = async (event) => {\n      vModel.call(this, event.value)\n      await this.$nextTick()\n      // 处理 change 事件相关逻辑（例如校验）\n      this.params.$table.updateStatus(this.params)\n    }\n  }\n  return listeners\n}\n\nexport function vModel(value, row, property) {\n  if (!row) {\n    row = this.row\n  }\n  if (!property) {\n    property = this.column.property\n  }\n  this.$set(row, property, value)\n}\n\n/** 模拟触发事件 */\nexport function dispatchEvent({cell, $event}, className, handler) {\n  window.setTimeout(() => {\n    let element = cell.getElementsByClassName(className)\n    if (element && element.length > 0) {\n      if (typeof handler === 'function') {\n        handler(element[0])\n      } else {\n        // 模拟触发点击事件\n        element[0].dispatchEvent($event)\n      }\n    }\n  }, 10)\n}"]}]}