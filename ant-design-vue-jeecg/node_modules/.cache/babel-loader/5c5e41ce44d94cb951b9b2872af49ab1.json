{"remainingRequest":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\activiti\\historicDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\activiti\\historicDetail.vue","mtime":1611914356000},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1621061377995},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1621061372054}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nimport { activitiMixin } from '@/views/activiti/mixins/activitiMixin';\nexport default {\n  name: \"historic_detail\",\n  mixins: [activitiMixin, JeecgListMixin],\n  props: {\n    /**/\n    procInstId: {\n      type: String,\n      default: '',\n      required: true\n    },\n    lcModa: {\n      type: Object,\n      required: false\n    }\n  },\n  data: function data() {\n    return {\n      url: {\n        historicFlow: '/actTask/historicFlow/',\n        getHighlightImg: \"\".concat(window._CONFIG['domianURL'], \"/activiti/models/getHighlightImg/\")\n      },\n      type: 0,\n      loading: false,\n      // 表单加载状态\n      loadingImg: false,\n      data: [],\n      id: \"\",\n      imgUrl: \"\",\n      backRoute: \"\"\n    };\n  },\n  created: function created() {\n    this.init();\n  },\n  watch: {\n    procInstId: function procInstId(newval, oldName) {\n      this.init();\n    }\n  },\n  methods: {\n    loadData: function loadData() {},\n    init: function init() {\n      this.id = this.procInstId;\n      this.imgUrl = this.url.getHighlightImg + this.id + \"?time=\" + new Date();\n      this.getDataList();\n    },\n    getDataList: function getDataList() {\n      var _this = this;\n\n      this.loading = true;\n      this.getAction(this.url.historicFlow + this.id).then(function (res) {\n        _this.loading = false;\n\n        if (res.success) {\n          _this.data = res.result;\n\n          if (!res.result || res.result.length == 0) {\n            _this.$message.info(\"未找到该记录审批历史数据,历史数据可能已被删除\");\n          }\n        } else {\n          _this.$message.error(res.message);\n        }\n      });\n    },\n    handleTableChange: function handleTableChange(pagination, filters, sorter) {\n      //分页、排序、筛选变化时触发\n      //TODO 筛选\n      if (Object.keys(sorter).length > 0) {\n        this.isorter.column = sorter.field;\n        this.isorter.order = \"ascend\" == sorter.order ? \"asc\" : \"desc\";\n      }\n\n      this.ipagination = pagination; // this.loadData();\n    },\n    callback: function callback(key) {},\n    afterSub: function afterSub() {},\n    pass: function pass(v) {\n      this.$emit('passTask', v);\n    },\n    back: function back(v) {\n      this.$emit('backTask', v);\n    }\n  }\n};",{"version":3,"sources":["historicDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA,SAAA,cAAA,QAAA,yBAAA;AACA,SAAA,aAAA,QAAA,uCAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,iBADA;AAEA,EAAA,MAAA,EAAA,CAAA,aAAA,EAAA,cAAA,CAFA;AAGA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA;AAHA,KAFA;AAOA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AAPA,GAHA;AAeA,EAAA,IAfA,kBAeA;AACA,WAAA;AACA,MAAA,GAAA,EAAA;AACA,QAAA,YAAA,EAAA,wBADA;AAEA,QAAA,eAAA,YAAA,MAAA,CAAA,OAAA,CAAA,WAAA,CAAA;AAFA,OADA;AAKA,MAAA,IAAA,EAAA,CALA;AAMA,MAAA,OAAA,EAAA,KANA;AAMA;AACA,MAAA,UAAA,EAAA,KAPA;AAQA,MAAA,IAAA,EAAA,EARA;AASA,MAAA,EAAA,EAAA,EATA;AAUA,MAAA,MAAA,EAAA,EAVA;AAWA,MAAA,SAAA,EAAA;AAXA,KAAA;AAaA,GA7BA;AA8BA,EAAA,OA9BA,qBA8BA;AACA,SAAA,IAAA;AACA,GAhCA;AAiCA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA,oBAAA,MAAA,EAAA,OAAA,EAAA;AACA,WAAA,IAAA;AACA;AAHA,GAjCA;AAsCA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA,CAEA,CAHA;AAIA,IAAA,IAJA,kBAIA;AACA,WAAA,EAAA,GAAA,KAAA,UAAA;AACA,WAAA,MAAA,GAAA,KAAA,GAAA,CAAA,eAAA,GAAA,KAAA,EAAA,GAAA,QAAA,GAAA,IAAA,IAAA,EAAA;AACA,WAAA,WAAA;AACA,KARA;AASA,IAAA,WATA,yBASA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,SAAA,CAAA,KAAA,GAAA,CAAA,YAAA,GAAA,KAAA,EAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AACA,YAAA,GAAA,CAAA,OAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,MAAA;;AACA,cAAA,CAAA,GAAA,CAAA,MAAA,IAAA,GAAA,CAAA,MAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,yBAAA;AACA;AACA,SALA,MAKA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,OAAA;AACA;AACA,OAVA;AAWA,KAtBA;AAuBA,IAAA,iBAvBA,6BAuBA,UAvBA,EAuBA,OAvBA,EAuBA,MAvBA,EAuBA;AACA;AACA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,MAAA,EAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,OAAA,CAAA,MAAA,GAAA,MAAA,CAAA,KAAA;AACA,aAAA,OAAA,CAAA,KAAA,GAAA,YAAA,MAAA,CAAA,KAAA,GAAA,KAAA,GAAA,MAAA;AACA;;AACA,WAAA,WAAA,GAAA,UAAA,CAPA,CAQA;AACA,KAhCA;AAiCA,IAAA,QAjCA,oBAiCA,GAjCA,EAiCA,CACA,CAlCA;AAmCA,IAAA,QAnCA,sBAmCA,CAEA,CArCA;AAsCA,IAAA,IAtCA,gBAsCA,CAtCA,EAsCA;AACA,WAAA,KAAA,CAAA,UAAA,EAAA,CAAA;AACA,KAxCA;AAyCA,IAAA,IAzCA,gBAyCA,CAzCA,EAyCA;AACA,WAAA,KAAA,CAAA,UAAA,EAAA,CAAA;AACA;AA3CA;AAtCA,CAAA","sourcesContent":["<style lang=\"less\">\n</style>\n<template>\n  <div class=\"search\">\n    <a-card style=\"margin-bottom:10px;\">\n      <p slot=\"title\">\n        <span>流程审批进度历史</span>\n      </p>\n      <a-row style=\"position:relative\">\n        <a-table :loading=\"loading\" rowKey=\"id\"\n                 :dataSource=\"data\"\n                 :pagination=\"false\"\n                  ref=\"table\">\n          <a-table-column title=\"#\"  width=\"50\">\n            <template slot-scope=\"t,r,i\" >\n              <span> {{i+1}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"任务名称\" dataIndex=\"name\"  width=\"150\" align=\"center\">\n            <template slot-scope=\"t\">\n              <span> {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"处理人\" dataIndex=\"assignees\"  width=\"150\" align=\"center\">\n            <template slot-scope=\"t\">\n              <div v-if=\"t\">\n                <span v-for=\"item in t\">\n                  <span v-if=\"item.isExecutor\" style=\"color: #00DB00;\">{{item.username}} </span>\n                  <span v-else style=\"color: #999;\">{{item.username}} </span>\n                </span>\n              </div>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"审批操作\" dataIndex=\"deleteReason\"  width=\"150\" align=\"center\">\n            <template slot-scope=\"t\">\n              <span v-if=\"t.toString().indexOf('通过')>-1\" style=\"color: #00DB00\">{{t}}</span>\n              <span v-else-if=\"t.toString().indexOf('驳回')>-1\" style=\"color: red;\">{{t}}</span>\n              <span v-else>{{t}}</span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"审批意见\" dataIndex=\"comment\"  width=\"150\" align=\"center\">\n            <template slot-scope=\"t\">\n              <span>{{t}}</span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"耗时\" dataIndex=\"duration\"  width=\"150\" align=\"center\">\n            <template slot-scope=\"t\">\n              <span>{{millsToTime(t)}}</span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"创建时间\" dataIndex=\"createTime\"  width=\"150\" align=\"center\">\n            <template slot-scope=\"t\">\n              <span>{{t}}</span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"完成时间\" dataIndex=\"endTime\"  width=\"150\" align=\"center\">\n            <template slot-scope=\"t\">\n              <span>{{t}}</span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"状态\" dataIndex=\"endTime\" key=\"aaa\" width=\"150\" align=\"center\">\n            <template slot-scope=\"t\">\n              <span v-if=\"t\" style=\"color: blue;\">已办理</span>\n              <span v-else style=\"color: #999999\">待处理</span>\n            </template>\n          </a-table-column>\n        </a-table>\n      </a-row>\n    </a-card>\n\n    <a-tabs type=\"card\" @change=\"callback\">\n      <a-tab-pane key=\"1\" tab=\"实时流程图\">\n        <a-card>\n          <!--<p slot=\"title\">\n            <span>实时流程图</span>\n          </p>-->\n          <a-row style=\"position:relative\">\n            <img :src=\"imgUrl\" />\n            <a-spin size=\"large\" fix v-if=\"loadingImg\"></a-spin>\n          </a-row>\n        </a-card>\n      </a-tab-pane>\n      <a-tab-pane key=\"2\" tab=\"表单数据\" v-if=\"lcModa\">\n        <a-card>\n          <!--流程表单-->\n          <component :disabled=\"lcModa.disabled\" :is=\"lcModa.formComponent\"\n          :processData=\"lcModa.processData\" :isNew=\"lcModa.isNew\" :task=\"lcModa.isTask\"\n          @afterSubmit=\"afterSub\"\n          @passTask=\"pass(lcModa.processData)\"\n          @backTask=\"back(lcModa.processData)\"\n          @close=\"lcModa.visible=false,lcModa.disabled = false\"></component>\n        </a-card>\n      </a-tab-pane>\n    </a-tabs>\n  </div>\n</template>\n\n<script>\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin'\nimport { activitiMixin } from '@/views/activiti/mixins/activitiMixin'\nexport default {\n  name: \"historic_detail\",\n  mixins:[activitiMixin,JeecgListMixin],\n  props: {\n    /**/\n    procInstId: {\n      type: String,\n      default: '',\n      required: true\n    },\n    lcModa: {\n      type: Object,\n      required: false\n    }\n  },\n  data() {\n    return {\n      url:{\n        historicFlow:'/actTask/historicFlow/',\n        getHighlightImg:`${window._CONFIG['domianURL']}/activiti/models/getHighlightImg/`\n      },\n      type: 0,\n      loading: false, // 表单加载状态\n      loadingImg: false,\n      data: [],\n      id: \"\",\n      imgUrl: \"\",\n      backRoute: \"\"\n    };\n  },\n  created() {\n    this.init();\n  },\n  watch: {\n    procInstId:function(newval ,oldName) {\n      this.init();\n    }\n  },\n  methods: {\n    loadData(){\n\n    },\n    init() {\n      this.id = this.procInstId;\n      this.imgUrl =this.url.getHighlightImg + this.id + \"?time=\" + new Date();\n      this.getDataList();\n    },\n    getDataList() {\n      this.loading = true;\n      this.getAction(this.url.historicFlow+this.id).then(res => {\n        this.loading = false;\n        if (res.success) {\n          this.data = res.result;\n          if (!res.result || res.result.length == 0) {\n            this.$message.info( \"未找到该记录审批历史数据,历史数据可能已被删除\");\n          }\n        }else {\n          this.$message.error( res.message);\n        }\n      });\n    },\n    handleTableChange(pagination, filters, sorter) {\n      //分页、排序、筛选变化时触发\n      //TODO 筛选\n      if (Object.keys(sorter).length > 0) {\n        this.isorter.column = sorter.field;\n        this.isorter.order = \"ascend\" == sorter.order ? \"asc\" : \"desc\"\n      }\n      this.ipagination = pagination;\n      // this.loadData();\n    },\n    callback(key){\n    },\n    afterSub(){\n\n    },\n    pass(v){\n      this.$emit('passTask',v)\n    },\n    back(v){\n      this.$emit('backTask',v)\n    }\n  },\n\n};\n</script>"],"sourceRoot":"src/views/activiti"}]}