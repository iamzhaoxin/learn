{"remainingRequest":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\activiti\\form\\leaveForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\activiti\\form\\leaveForm.vue","mtime":1621938876820},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1621061377995},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1621061372054}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport pick from \"lodash.pick\";\nexport default {\n  name: 'demoForm',\n  props: {\n    /*全局禁用，可表示查看*/\n    disabled: {\n      type: Boolean,\n      default: false,\n      required: false\n    },\n\n    /*流程数据*/\n    processData: {\n      type: Object,\n      default: function _default() {\n        return {};\n      },\n      required: false\n    },\n\n    /*是否新增*/\n    isNew: {\n      type: Boolean,\n      default: false,\n      required: false\n    },\n\n    /*是否处理流程*/\n    task: {\n      type: Boolean,\n      default: false,\n      required: false\n    }\n  },\n  data: function data() {\n    return {\n      url: {\n        getForm: '/actBusiness/getForm',\n        addApply: '/actBusiness/add',\n        editForm: '/actBusiness/editForm'\n      },\n      description: '流程表单demo，按例开发表单。需在 activitiMixin.js 中加入写好的表单',\n      // form\n      form: this.$form.createForm(this),\n\n      /*表单回显数据*/\n      data: {},\n      btndisabled: false\n    };\n  },\n  created: function created() {\n    console.log(\"流程数据\", this.processData);\n\n    if (!this.isNew) {\n      this.init();\n    }\n  },\n  methods: {\n    /*回显数据*/\n    init: function init() {\n      var _this = this;\n\n      this.btndisabled = true;\n      var r = this.processData;\n      this.getAction(this.url.getForm, {\n        tableId: r.tableId,\n        tableName: r.tableName\n      }).then(function (res) {\n        if (res.success) {\n          var formData = res.result;\n          formData.tableName = r.tableName;\n          _this.data = formData;\n          console.log(\"表单回显数据\", _this.data);\n\n          _this.$nextTick(function () {\n            _this.form.setFieldsValue(pick(_this.data, 'name'));\n          });\n\n          _this.btndisabled = false;\n        } else {\n          _this.$message.error(res.message);\n        }\n      });\n    },\n    // handler\n    handleSubmit: function handleSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          var formData = Object.assign(_this2.data || {}, values);\n          formData.procDefId = _this2.processData.id;\n          formData.procDeTitle = _this2.processData.name;\n          if (!formData.tableName) formData.tableName = _this2.processData.businessTable;\n          formData.filedNames = _.keys(values).join(\",\");\n          console.log('formData', values);\n          var url = _this2.url.addApply;\n\n          if (!_this2.isNew) {\n            url = _this2.url.editForm;\n          }\n\n          _this2.btndisabled = true;\n\n          _this2.postFormAction(url, formData).then(function (res) {\n            if (res.success) {\n              _this2.$message.success(\"保存成功！\"); //todo 将表单的数据传给父组件\n\n\n              _this2.$emit('afterSubmit', formData);\n            } else {\n              _this2.$message.error(res.message);\n            }\n          }).finally(function () {\n            _this2.btndisabled = false;\n          });\n        }\n      });\n    },\n    close: function close() {\n      //todo 关闭后的回调\n      this.$emit('close');\n    },\n\n    /*通过审批*/\n    passTask: function passTask() {\n      this.$emit('passTask');\n    },\n\n    /*驳回审批*/\n    backTask: function backTask() {\n      this.$emit('backTask');\n    }\n  }\n};",{"version":3,"sources":["leaveForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <!--流程业务表单-->\r\n  <div class=\"form-main\">\r\n    <a-card :body-style=\"{padding: '24px 32px'}\" :bordered=\"false\">\r\n      <a-form @submit=\"handleSubmit\" :form=\"form\">\r\n        <a-form-item\r\n          label=\"请假事由\"\r\n          :labelCol=\"{lg: {span: 7}, sm: {span: 7}}\"\r\n          :wrapperCol=\"{lg: {span: 10}, sm: {span: 17} }\">\r\n          <a-input :disabled=\"disabled\"\r\n                   v-decorator=\"[\r\n            'name',\r\n            {rules: [{ required: true, message: '请输入请假事由' }]}\r\n          ]\"\r\n                   name=\"name\"\r\n                   placeholder=\"给目标起个名字\" />\r\n        </a-form-item>\r\n        <a-form-item v-if=\"!disabled\"\r\n                     :wrapperCol=\"{ span: 24 }\"\r\n                     style=\"text-align: center\"\r\n        >\r\n          <a-button type=\"primary\" :disabled=\"disabled||btndisabled\" @click=\"handleSubmit\">保存</a-button>\r\n          <a-button style=\"margin-left: 8px\" :disabled=\"disabled\" @click=\"close\">取消</a-button>\r\n        </a-form-item>\r\n        <a-form-item v-if=\"task\"\r\n                     :wrapperCol=\"{ span: 24 }\"\r\n                     style=\"text-align: center\"\r\n        >\r\n          <a-button type=\"primary\"  @click=\"passTask\">通过</a-button>\r\n          <a-button style=\"margin-left: 8px\"  @click=\"backTask\">驳回</a-button>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import pick from \"lodash.pick\";\r\n\r\n  export default {\r\n    name: 'demoForm',\r\n    props:{\r\n      /*全局禁用，可表示查看*/\r\n      disabled:{\r\n        type:Boolean,\r\n        default:false,\r\n        required:false\r\n      },\r\n      /*流程数据*/\r\n      processData:{\r\n        type:Object,\r\n        default:()=>{return {}},\r\n        required:false\r\n      },\r\n      /*是否新增*/\r\n      isNew: {type: Boolean, default: false, required: false},\r\n      /*是否处理流程*/\r\n      task: {type: Boolean, default: false, required: false}\r\n    },\r\n    data () {\r\n      return {\r\n        url:{\r\n          getForm:'/actBusiness/getForm',\r\n          addApply:'/actBusiness/add',\r\n          editForm:'/actBusiness/editForm',\r\n        },\r\n        description: '流程表单demo，按例开发表单。需在 activitiMixin.js 中加入写好的表单',\r\n        // form\r\n        form: this.$form.createForm(this),\r\n        /*表单回显数据*/\r\n        data:{},\r\n        btndisabled: false\r\n      }\r\n    },\r\n    created() {\r\n      console.log(\"流程数据\",this.processData)\r\n      if (!this.isNew){\r\n        this.init();\r\n      }\r\n    },\r\n    methods: {\r\n      /*回显数据*/\r\n      init(){\r\n        this.btndisabled = true;\r\n        var r = this.processData;\r\n        this.getAction(this.url.getForm,{\r\n          tableId:r.tableId,\r\n          tableName:r.tableName,\r\n        }).then((res)=>{\r\n          if (res.success){\r\n            let formData = res.result;\r\n            formData.tableName = r.tableName;\r\n            this.data = formData;\r\n            console.log(\"表单回显数据\",this.data)\r\n            this.$nextTick(() => {\r\n              this.form.setFieldsValue(pick(this.data,'name'))\r\n            });\r\n            this.btndisabled = false;\r\n          }else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n      },\r\n      // handler\r\n      handleSubmit (e) {\r\n        e.preventDefault()\r\n        this.form.validateFields((err, values) => {\r\n          if (!err) {\r\n            let formData = Object.assign(this.data||{}, values)\r\n            formData.procDefId = this.processData.id;\r\n            formData.procDeTitle = this.processData.name;\r\n            if (!formData.tableName)formData.tableName = this.processData.businessTable;\r\n            formData.filedNames = _.keys(values).join(\",\");\r\n            console.log('formData', values)\r\n\r\n            var url = this.url.addApply;\r\n            if (!this.isNew){\r\n              url = this.url.editForm;\r\n            }\r\n            this.btndisabled = true;\r\n            this.postFormAction(url,formData).then((res)=>{\r\n              if (res.success){\r\n                this.$message.success(\"保存成功！\")\r\n                //todo 将表单的数据传给父组件\r\n                this.$emit('afterSubmit',formData)\r\n              }else {\r\n                this.$message.error(res.message)\r\n              }\r\n            }).finally(()=>{\r\n              this.btndisabled = false;\r\n            })\r\n          }\r\n        })\r\n      },\r\n      close() {\r\n        //todo 关闭后的回调\r\n        this.$emit('close')\r\n      },\r\n      /*通过审批*/\r\n      passTask() {\r\n        this.$emit('passTask')\r\n      },\r\n      /*驳回审批*/\r\n      backTask() {\r\n        this.$emit('backTask')\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\" scoped>\r\n  .form-main{\r\n  }\r\n</style>"],"sourceRoot":"src/views/activiti/form"}]}