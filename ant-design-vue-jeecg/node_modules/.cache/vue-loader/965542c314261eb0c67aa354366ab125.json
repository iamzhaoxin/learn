{"remainingRequest":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\jeecg\\TableTotal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\jeecg\\TableTotal.vue","mtime":1611914356000},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1621061377995},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1621061372054}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: 'TableTotal',\n  data() {\n    return {\n      columns: [\n        {\n          title: '#',\n          width: '180px',\n          align: 'center',\n          dataIndex: 'rowIndex',\n          customRender: function (text, r, index) {\n            return (text !== '合计') ? (parseInt(index) + 1) : text\n          }\n        },\n        {\n          title: '姓名',\n          dataIndex: 'name',\n        },\n        {\n          title: '贡献点',\n          dataIndex: 'point',\n        },\n        {\n          title: '等级',\n          dataIndex: 'level',\n        },\n        {\n          title: '更新时间',\n          dataIndex: 'updateTime',\n        },\n      ],\n      /* 分页参数 */\n      ipagination:{\n        current: 1,\n        pageSize: 10,\n        pageSizeOptions: ['10', '20', '30'],\n        showTotal: (total, range) => {\n          return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\"\n        },\n        showQuickJumper: true,\n        showSizeChanger: true,\n        total: 0\n      },\n      dataSource: [\n        { id:\"1\",name: '张三', point: 23, level: 3, updateTime: '2019-8-14' },\n        { name: '小王', point: 6, level: 1, updateTime: '2019-8-13' },\n        { name: '李四', point: 53, level: 8, updateTime: '2019-8-12' },\n        { name: '小红', point: 44, level: 5, updateTime: '2019-8-11' },\n        { name: '王五', point: 97, level: 10, updateTime: '2019-8-10' },\n        { name: '小明', point: 33, level: 2, updateTime: '2019-8-10' },\n        { name: '小张', point: 33, level: 2, updateTime: '2019-8-10' },\n        { name: '小六', point: 33, level: 2, updateTime: '2019-8-10' },\n        { name: '小五', point: 33, level: 2, updateTime: '2019-8-10' },\n        { name: '小赵', point: 33, level: 2, updateTime: '2019-8-10' },\n        { name: '李华', point: 33, level: 2, updateTime: '2019-8-10' },\n        { name: '小康', point: 33, level: 2, updateTime: '2019-8-10' },\n        { name: '小鹿', point: 33, level: 2, updateTime: '2019-8-10' },\n      ],\n      newArr:[],\n      newDataSource:[],\n    }\n  },\n  mounted() {\n    // this.tableAddTotalRow(this.columns, this.dataSource)\n    /*新增分页合计方法*/\n    this.newDataSource=this.dataSource\n    this.dataHandling(this.ipagination.pageSize-1)\n  },\n  watch:{\n    'ipagination.pageSize':function(val) {\n      this.dataHandling(val-1)\n    }\n  },\n  methods: {\n    /** 表格增加合计行 */\n    tableAddTotalRow(columns, dataSource) {\n      let numKey = 'rowIndex'\n      let totalRow = { [numKey]: '合计' }\n      columns.forEach(column => {\n        let { key, dataIndex } = column\n        if (![key, dataIndex].includes(numKey)) {\n\n          let total = 0\n          dataSource.forEach(data => {\n            total += /^\\d+\\.?\\d?$/.test(data[dataIndex]) ? Number.parseInt(data[dataIndex]) : Number.NaN\n            console.log(data[dataIndex], ':', (/^\\d+\\.?\\d?$/.test(data[dataIndex]) ? Number.parseInt(data[dataIndex]) : Number.NaN))\n          })\n\n          if (Number.isNaN(total)) {\n            total = '-'\n          }\n          totalRow[dataIndex] = total\n        }\n      })\n\n      dataSource.push(totalRow)\n    },\n    handleTableChange(pagination, filters, sorter) {\n      this.ipagination = pagination;\n    },\n    /*如果分页走这个方法*/\n    dataHandling(num) {\n      this.newArr=[];\n      let arrLength = this.newDataSource.length; // 数组长度;\n      let index = 0;\n      for (let i = 0; i < arrLength; i++) {\n        if (i % num === 0 && i !== 0) {\n          this.newArr.push(this.newDataSource.slice(index, i));\n          index = i;\n        }\n        if ((i + 1) === arrLength) {\n          this.newArr.push(this.newDataSource.slice(index, (i + 1)));\n        }\n      }\n      var arrs=this.newArr;\n      for (let i =0;i<arrs.length;i++){\n        let arr = arrs[i];\n        let newArr= { };\n        newArr.name=\"-\";\n        newArr.updateTime=\"-\";\n        newArr.rowIndex=\"合计\"\n        var level=0;\n        var point=0;\n        for (let j=0;j<arr.length;j++){\n          level+=arr[j].level;\n          point+=arr[j].point;\n        }\n        newArr.level=level;\n        newArr.point=point;\n        arrs[i].push(newArr);\n      }\n      var newDataSource=[];\n      for (let i =0;i<arrs.length;i++){\n        let arr = arrs[i];\n        for(var j in arr){\n          newDataSource.push(arr[j]);\n        }\n      }\n      console.log(this.dataSource)\n      this.dataSource = Object.values(newDataSource);\n      console.log(this.dataSource)\n    }\n  }\n}\n",{"version":3,"sources":["TableTotal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TableTotal.vue","sourceRoot":"src/views/jeecg","sourcesContent":["<template>\n  <a-card :bordered=\"false\">\n    <a-table\n      rowKey=\"rowIndex\"\n      bordered\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :pagination=\"ipagination\"\n      @change=\"handleTableChange\"\n    >\n    </a-table>\n  </a-card>\n</template>\n\n<script>\n  export default {\n    name: 'TableTotal',\n    data() {\n      return {\n        columns: [\n          {\n            title: '#',\n            width: '180px',\n            align: 'center',\n            dataIndex: 'rowIndex',\n            customRender: function (text, r, index) {\n              return (text !== '合计') ? (parseInt(index) + 1) : text\n            }\n          },\n          {\n            title: '姓名',\n            dataIndex: 'name',\n          },\n          {\n            title: '贡献点',\n            dataIndex: 'point',\n          },\n          {\n            title: '等级',\n            dataIndex: 'level',\n          },\n          {\n            title: '更新时间',\n            dataIndex: 'updateTime',\n          },\n        ],\n        /* 分页参数 */\n        ipagination:{\n          current: 1,\n          pageSize: 10,\n          pageSizeOptions: ['10', '20', '30'],\n          showTotal: (total, range) => {\n            return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\"\n          },\n          showQuickJumper: true,\n          showSizeChanger: true,\n          total: 0\n        },\n        dataSource: [\n          { id:\"1\",name: '张三', point: 23, level: 3, updateTime: '2019-8-14' },\n          { name: '小王', point: 6, level: 1, updateTime: '2019-8-13' },\n          { name: '李四', point: 53, level: 8, updateTime: '2019-8-12' },\n          { name: '小红', point: 44, level: 5, updateTime: '2019-8-11' },\n          { name: '王五', point: 97, level: 10, updateTime: '2019-8-10' },\n          { name: '小明', point: 33, level: 2, updateTime: '2019-8-10' },\n          { name: '小张', point: 33, level: 2, updateTime: '2019-8-10' },\n          { name: '小六', point: 33, level: 2, updateTime: '2019-8-10' },\n          { name: '小五', point: 33, level: 2, updateTime: '2019-8-10' },\n          { name: '小赵', point: 33, level: 2, updateTime: '2019-8-10' },\n          { name: '李华', point: 33, level: 2, updateTime: '2019-8-10' },\n          { name: '小康', point: 33, level: 2, updateTime: '2019-8-10' },\n          { name: '小鹿', point: 33, level: 2, updateTime: '2019-8-10' },\n        ],\n        newArr:[],\n        newDataSource:[],\n      }\n    },\n    mounted() {\n      // this.tableAddTotalRow(this.columns, this.dataSource)\n      /*新增分页合计方法*/\n      this.newDataSource=this.dataSource\n      this.dataHandling(this.ipagination.pageSize-1)\n    },\n    watch:{\n      'ipagination.pageSize':function(val) {\n        this.dataHandling(val-1)\n      }\n    },\n    methods: {\n      /** 表格增加合计行 */\n      tableAddTotalRow(columns, dataSource) {\n        let numKey = 'rowIndex'\n        let totalRow = { [numKey]: '合计' }\n        columns.forEach(column => {\n          let { key, dataIndex } = column\n          if (![key, dataIndex].includes(numKey)) {\n\n            let total = 0\n            dataSource.forEach(data => {\n              total += /^\\d+\\.?\\d?$/.test(data[dataIndex]) ? Number.parseInt(data[dataIndex]) : Number.NaN\n              console.log(data[dataIndex], ':', (/^\\d+\\.?\\d?$/.test(data[dataIndex]) ? Number.parseInt(data[dataIndex]) : Number.NaN))\n            })\n\n            if (Number.isNaN(total)) {\n              total = '-'\n            }\n            totalRow[dataIndex] = total\n          }\n        })\n\n        dataSource.push(totalRow)\n      },\n      handleTableChange(pagination, filters, sorter) {\n        this.ipagination = pagination;\n      },\n      /*如果分页走这个方法*/\n      dataHandling(num) {\n        this.newArr=[];\n        let arrLength = this.newDataSource.length; // 数组长度;\n        let index = 0;\n        for (let i = 0; i < arrLength; i++) {\n          if (i % num === 0 && i !== 0) {\n            this.newArr.push(this.newDataSource.slice(index, i));\n            index = i;\n          }\n          if ((i + 1) === arrLength) {\n            this.newArr.push(this.newDataSource.slice(index, (i + 1)));\n          }\n        }\n        var arrs=this.newArr;\n        for (let i =0;i<arrs.length;i++){\n          let arr = arrs[i];\n          let newArr= { };\n          newArr.name=\"-\";\n          newArr.updateTime=\"-\";\n          newArr.rowIndex=\"合计\"\n          var level=0;\n          var point=0;\n          for (let j=0;j<arr.length;j++){\n            level+=arr[j].level;\n            point+=arr[j].point;\n          }\n          newArr.level=level;\n          newArr.point=point;\n          arrs[i].push(newArr);\n        }\n        var newDataSource=[];\n        for (let i =0;i<arrs.length;i++){\n          let arr = arrs[i];\n          for(var j in arr){\n            newDataSource.push(arr[j]);\n          }\n        }\n        console.log(this.dataSource)\n        this.dataSource = Object.values(newDataSource);\n        console.log(this.dataSource)\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"]}]}