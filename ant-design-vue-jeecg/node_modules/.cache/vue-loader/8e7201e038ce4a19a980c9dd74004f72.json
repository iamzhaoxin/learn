{"remainingRequest":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\activiti\\processFinishManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\src\\views\\activiti\\processFinishManage.vue","mtime":1611914356000},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1621061377995},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621061384845},{"path":"D:\\activiti\\project01\\jeecg-boot-activiti-master\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1621061372054}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {activitiMixin} from \"./mixins/activitiMixin\";\nimport {JeecgListMixin} from \"../../mixins/JeecgListMixin\";\nexport default {\n  mixins:[JeecgListMixin,activitiMixin],\n  name: \"process-finish-manage\",\n  data() {\n    return {\n      modalLsVisible: false,\n      procInstId: '',\n      lcModa: {\n        title:'',\n        disabled:false,\n        visible:false,\n        formComponent : null,\n        isNew : false\n      },\n      openSearch: true,\n      openTip: true,\n      loading: true, // 表单加载状态\n      selectCount: 0, // 多选计数\n      selectList: [], // 多选数据\n      selectDate: null, // 选择日期绑定modal\n      searchForm: {\n        // 搜索框对应data对象\n        name: \"\",\n        key: \"\",\n        pageNumber: 1, // 当前页数\n        pageSize: 10 // 页面大小\n      },\n      data: [], // 表单数据\n      total: 0, // 表单数据总数\n      deleteId: \"\",\n      url: {\n        getFinishedProcess:'/actProcessIns/getFinishedProcess',\n        delHistoricIns:'/actProcessIns/delHistoricInsByIds/'\n      }\n    };\n  },\n  methods: {\n    loadData(){},\n    init() {\n      this.getDataList();\n    },\n    selectDateRange(v) {\n      this.searchForm.startDate = null;\n      this.searchForm.endDate = null;\n      if (v[0]) {\n        this.searchForm.startDate = v[0].format(\"YYYY-MM-DD\");\n      }\n      if (v[1]) {\n        this.searchForm.endDate = v[1].format(\"YYYY-MM-DD\");\n      }\n    },\n    getDataList() {\n      this.loading = true;\n      this.getAction(this.url.getFinishedProcess,this.searchForm).then(res => {\n        this.loading = false;\n        if (res.success) {\n          this.data = res.result;\n        }else {\n          this.$message.error(res.message)\n        }\n      });\n    },\n    handleSearch() {\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      this.getDataList();\n    },\n    handleReset() {\n      this.selectDate = null;\n      this.searchForm={};\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      // 重新加载数据\n      this.getDataList();\n    },\n    handelCancel() {\n      this.modalVisible = false;\n    },\n    detail(r) {\n      if (!r.routeName) {\n        this.$message.warning(\n          \"该流程信息未配置表单，请联系开发人员！\"\n        );\n        return;\n      }\n      this.lcModa.disabled = true;\n      this.lcModa.title = '查看流程业务信息：'+r.name;\n      this.lcModa.formComponent = this.getFormComponent(r.routeName).component;\n      this.lcModa.processData = r;\n      this.lcModa.isNew = false;\n      this.lcModa.visible = true;\n    },\n    history(v) {\n      if (!v.id) {\n        this.$message.error(\"流程实例ID不存在\");\n        return;\n      }\n      this.procInstId = v.id;\n      this.modalLsVisible = true;\n    },\n    remove(v) {\n      this.postFormAction(this.url.delHistoricIns+v.id).then(res => {\n        if (res.success) {\n          this.$message.success(\"操作成功\");\n          this.getDataList();\n        }else {\n          this.$message.error(res.message);\n        }\n      });\n    },\n  },\n  mounted() {\n    this.init();\n  },\n  watch: {\n  }\n};\n",{"version":3,"sources":["processFinishManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"processFinishManage.vue","sourceRoot":"src/views/activiti","sourcesContent":["<style lang=\"less\">\n  @import '~@assets/less/common.less';\n\n</style>\n<template>\n  <div class=\"search\">\n    <a-card>\n      <div class=\"table-page-search-wrapper\">\n        <a-form layout=\"inline\" @keyup.enter.native=\"handleSearch\">\n          <a-row :gutter=\"24\">\n            <a-col :md=\"6\" :sm=\"8\">\n              <a-form-item label=\"流程名称\" prop=\"name\">\n                <a-input\n                  type=\"text\"\n                  v-model=\"searchForm.name\"\n                  placeholder=\"请输入\"\n                  clearable\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"6\" :sm=\"8\">\n              <a-form-item label=\"标识Key\" prop=\"name\">\n                <a-input\n                  type=\"text\"\n                  v-model=\"searchForm.key\"\n                  placeholder=\"请输入\"\n                  clearable\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"6\" :sm=\"8\">\n              <a-form-item label=\"结束时间\">\n                <a-range-picker\n                  v-model=\"selectDate\"\n                  format=\"YYYY-MM-DD\"\n                  clearable\n                  @change=\"selectDateRange\"\n                ></a-range-picker>\n              </a-form-item>\n            </a-col>\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\n            <a-col :md=\"6\" :sm=\"12\" >\n              <a-button @click=\"handleSearch\" type=\"primary\" icon=\"search\">搜索</a-button>\n              <a-button @click=\"handleReset\" style=\"margin-left: 10px;\">重置</a-button>\n            </a-col>\n          </span>\n          </a-row>\n        </a-form>\n      </div>\n      <a-row>\n        <a-table :scroll=\"{x:1680,y:innerHeight/2}\" bordered\n          :loading=\"loading\"\n          rowKey=\"id\"\n          :dataSource=\"data\"\n          :pagination=\"ipagination\"\n          @change=\"handleTableChange\"\n          ref=\"table\"\n        >\n          <a-table-column title=\"#\"  :width=\"50\" fixed=\"left\">\n            <template slot-scope=\"t,r,i\" >\n              <span> {{i+1}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"流程实例ID\" dataIndex=\"id\" :width=\"150\" fixed=\"left\">\n            <template slot-scope=\"t,r,i\" >\n              <span> {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"流程名称\" dataIndex=\"name\" :width=\"150\" fixed=\"left\">\n            <template slot-scope=\"t,r,i\" >\n              <span> {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"申请人\" dataIndex=\"applyer\"  :ellipsis= \"true\" :width=\"150\" fixed=\"left\">\n            <template slot-scope=\"t,r,i\" >\n              <span> {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"标识Key\" dataIndex=\"key\" :width=\"150\" >\n            <template slot-scope=\"t,r,i\" >\n              <span> {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"版本\" dataIndex=\"version\" :width=\"80\">\n            <template slot-scope=\"t,r,i\" >\n              <span> v.{{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"审批结果\" dataIndex=\"result\" :width=\"150\"\n                          key=\"result\" :sorter=\"(a,b)=>a.result - b.result\"\n          >\n            <template slot-scope=\"t,r,i\" >\n              <span v-if=\"t==4\" style=\"color: #999999\"> 发起人撤回 </span>\n              <span v-else-if=\"t==5\" style=\"color: orange\"> 已删除 </span>\n              <span v-else-if=\"t==2\" style=\"color: green\"> 已通过 </span>\n              <span v-else-if=\"t==3\" style=\"color: red\"> 已驳回 </span>\n              <span v-else > 未知 </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"原因详情\" dataIndex=\"deleteReason\" :width=\"150\">\n            <template slot-scope=\"t,r,i\" >\n             <j-ellipsis :value=\"t\" :length=\"10\"></j-ellipsis>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"总耗时\" dataIndex=\"duration\" :width=\"100\"\n                          key=\"duration\" :sorter=\"(a,b)=>a.duration - b.duration\"\n          >\n            <template slot-scope=\"t,r,i\" >\n              <span > {{millsToTime(t)}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"开始时间\" dataIndex=\"startTime\" :width=\"150\">\n            <template slot-scope=\"t,r,i\" >\n              <span > {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"结束时间\" dataIndex=\"endTime\" :width=\"150\">\n            <template slot-scope=\"t,r,i\" >\n              <span > {{t}} </span>\n            </template>\n          </a-table-column>\n          <a-table-column title=\"操作\" dataIndex=\"\" :width=\"250\" fixed=\"right\">\n            <template slot-scope=\"t,r,i\" >\n              <a href=\"javascript:void(0);\" style=\"color: green;\" @click=\"history(r)\" >审批历史</a>\n              <a-divider type=\"vertical\" />\n              <a href=\"javascript:void(0);\" style=\"color: blue;\" @click=\"detail(r)\" >表单数据</a>\n              <a-divider type=\"vertical\" />\n              <a-popconfirm title=\"确定删除吗?\" @confirm=\"() => remove(r)\">\n                <a style=\"color: red;\">删除</a>\n              </a-popconfirm>\n            </template>\n          </a-table-column>\n        </a-table>\n      </a-row>\n    </a-card>\n    <!---->\n    <a-modal title=\"审批历史\" v-model=\"modalLsVisible\" :mask-closable=\"false\" :width=\"'80%'\" :footer=\"null\">\n      <div v-if=\"modalLsVisible\">\n        <component :is=\"historicDetail\" :procInstId=\"procInstId\"></component>\n      </div>\n    </a-modal>\n    <!--流程表单-->\n    <a-modal :title=\"lcModa.title\" v-model=\"lcModa.visible\" :footer=\"null\" :maskClosable=\"false\" width=\"80%\">\n      <component :disabled=\"lcModa.disabled\" v-if=\"lcModa.visible\" :is=\"lcModa.formComponent\"\n                 :processData=\"lcModa.processData\" :isNew = \"lcModa.isNew\"\n                 @close=\"lcModa.visible=false,lcModa.disabled = false\"></component>\n    </a-modal>\n  </div>\n</template>\n\n<script>\n\nimport {activitiMixin} from \"./mixins/activitiMixin\";\nimport {JeecgListMixin} from \"../../mixins/JeecgListMixin\";\nexport default {\n  mixins:[JeecgListMixin,activitiMixin],\n  name: \"process-finish-manage\",\n  data() {\n    return {\n      modalLsVisible: false,\n      procInstId: '',\n      lcModa: {\n        title:'',\n        disabled:false,\n        visible:false,\n        formComponent : null,\n        isNew : false\n      },\n      openSearch: true,\n      openTip: true,\n      loading: true, // 表单加载状态\n      selectCount: 0, // 多选计数\n      selectList: [], // 多选数据\n      selectDate: null, // 选择日期绑定modal\n      searchForm: {\n        // 搜索框对应data对象\n        name: \"\",\n        key: \"\",\n        pageNumber: 1, // 当前页数\n        pageSize: 10 // 页面大小\n      },\n      data: [], // 表单数据\n      total: 0, // 表单数据总数\n      deleteId: \"\",\n      url: {\n        getFinishedProcess:'/actProcessIns/getFinishedProcess',\n        delHistoricIns:'/actProcessIns/delHistoricInsByIds/'\n      }\n    };\n  },\n  methods: {\n    loadData(){},\n    init() {\n      this.getDataList();\n    },\n    selectDateRange(v) {\n      this.searchForm.startDate = null;\n      this.searchForm.endDate = null;\n      if (v[0]) {\n        this.searchForm.startDate = v[0].format(\"YYYY-MM-DD\");\n      }\n      if (v[1]) {\n        this.searchForm.endDate = v[1].format(\"YYYY-MM-DD\");\n      }\n    },\n    getDataList() {\n      this.loading = true;\n      this.getAction(this.url.getFinishedProcess,this.searchForm).then(res => {\n        this.loading = false;\n        if (res.success) {\n          this.data = res.result;\n        }else {\n          this.$message.error(res.message)\n        }\n      });\n    },\n    handleSearch() {\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      this.getDataList();\n    },\n    handleReset() {\n      this.selectDate = null;\n      this.searchForm={};\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      // 重新加载数据\n      this.getDataList();\n    },\n    handelCancel() {\n      this.modalVisible = false;\n    },\n    detail(r) {\n      if (!r.routeName) {\n        this.$message.warning(\n          \"该流程信息未配置表单，请联系开发人员！\"\n        );\n        return;\n      }\n      this.lcModa.disabled = true;\n      this.lcModa.title = '查看流程业务信息：'+r.name;\n      this.lcModa.formComponent = this.getFormComponent(r.routeName).component;\n      this.lcModa.processData = r;\n      this.lcModa.isNew = false;\n      this.lcModa.visible = true;\n    },\n    history(v) {\n      if (!v.id) {\n        this.$message.error(\"流程实例ID不存在\");\n        return;\n      }\n      this.procInstId = v.id;\n      this.modalLsVisible = true;\n    },\n    remove(v) {\n      this.postFormAction(this.url.delHistoricIns+v.id).then(res => {\n        if (res.success) {\n          this.$message.success(\"操作成功\");\n          this.getDataList();\n        }else {\n          this.$message.error(res.message);\n        }\n      });\n    },\n  },\n  mounted() {\n    this.init();\n  },\n  watch: {\n  }\n};\n</script>"]}]}